jQuery(document).ready(function(a){var b=function(a){return(new Gettext).gettext(a)},c={xhrPool:[],xhrAbortAll:function(){a(this).each(function(a,b){b.abort()}),this.xhrPool=[]},check_notifications:function(){var b=c.srWebRoot+"/ui/get_messages";"visible"===document.visibilityState&&a.getJSON(b,function(b){a.each(b,function(a,b){c.notify(b.type,b.title,b.message)})}),setTimeout(function(){"use strict";c.check_notifications()},3e3)},notify:function(a,b,d){var e={desktop:!0,icon:c.srWebRoot+"/images/favicon.png"},f={dir1:"up",dir2:"left",firstpos1:25,firstpos2:25};PNotify.desktop.permission(),new PNotify({desktop:e,stack:f,addclass:"stack-bottomright",delay:5e3,hide:!0,history:!1,shadow:!1,styling:"brighttheme",width:"340px",type:a,title:b,text:d.replace(/<br[\s\/]*(?:\s[^>]*)?>/gi,"\n").replace(/<[\/]?b(?:\s[^>]*)?>/gi,"*").replace(/<i(?:\s[^>]*)?>/gi,"[").replace(/<[\/]i>/gi,"]").replace(/<(?:[\/]?ul|\/li)(?:\s[^>]*)?>/gi,"").replace(/<li(?:\s[^>]*)?>/gi,"\n* ")})},isMeta:function(b,c){return new RegExp(c.length>1?c.join("|"):c).test(a('meta[data-var="'+b+'"]').data("content"))},getMeta:function(b){return a('meta[data-var="'+b+'"]').data("content")},metaToBool:function(b){var c=a('meta[data-var="'+b+'"]').data("content");return void 0===c?(console.log(b+" is empty, did you forget to add this to main.mako?"),c):!("false"===(c=isNaN(c)?c.toLowerCase():c.toString())||"none"===c||"0"===c)},showHideRows:function(b,c){a("tr."+b).each(function(){c?a(this).show():a(this).hide()})},updateUrlParameter:function(a,b,c){var d=a.indexOf("#"),e=-1===d?"":a.substr(d);a=-1===d?a:a.substr(0,d);var f=new RegExp("([?&])"+b+"=.*?(&|$)","i"),g=-1!==a.indexOf("?")?"&":"?";return c?a=a.match(f)?a.replace(f,"$1"+b+"="+c+"$2"):a+g+b+"="+c:(a=a.replace(new RegExp("([?&]?)"+b+"=[^&]*","i"),""),"?"===a.slice(-1)&&(a=a.slice(0,-1)),-1===a.indexOf("?")&&(a=a.replace(/&/,"?"))),a+e},common:{init:function(){c.srPID=c.getMeta("srPID"),c.srWebRoot=c.getMeta("srWebRoot"),c.srDefaultPage=c.getMeta("srDefaultPage"),c.themeSpinner=c.getMeta("themeSpinner"),c.loadingHTML='<img src="'+c.getMeta("srWebRoot")+"/images/loading16"+c.getMeta("themeSpinner")+'.gif" height="16" width="16" />',c.anonURL=c.getMeta("anonURL"),a('[title!=""]').qtip({position:{viewport:a(window),my:"left center",adjust:{y:-10,x:2}},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow ui-tooltip-sb"}}),a.scrollUp({animation:"fade",scrollImg:{active:!0,type:"background",src:c.srWebRoot+"/images/top.png"}});for(var d=document.getElementsByTagName("img"),e=0;e<d.length;e++)d[e].getAttribute("data-src")&&d[e].setAttribute("src",d[e].getAttribute("data-src"));(navigator.maxTouchPoints||0)<2&&a(".dropdown-toggle").on("click",function(){"true"===a(this).attr("aria-expanded")&&(window.location.href=a(this).attr("href"))}),c.metaToBool("sickrage.FUZZY_DATING")&&(a.timeago.settings.allowFuture=!0,a.timeago.settings.strings={prefixAgo:null,prefixFromNow:"In ",suffixAgo:"ago",suffixFromNow:"",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"an hour",hours:"%d hours",day:"a day",days:"%d days",month:"a month",months:"%d months",year:"a year",years:"%d years",wordSeparator:" ",numbers:[]},a("[datetime]").timeago()),a.tablesorter.addParser({id:"loadingNames",is:function(){return!1},format:function(a){return 0===a.indexOf("Loading...")?a.replace("Loading...","000"):c.metaToBool("sickrage.SORT_ARTICLE")?a||"":(a||"").replace(/^(The|A|An)\s/i,"")},type:"text"}),a.tablesorter.addParser({id:"quality",is:function(){return!1},format:function(a){return a.replace("hd1080p",5).replace("hd720p",4).replace("hd",3).replace("sd",2).replace("any",1).replace("best",0).replace("custom",7)},type:"numeric"}),a.tablesorter.addParser({id:"realISODate",is:function(){return!1},format:function(a){return new Date(a).getTime()},type:"numeric"}),a.tablesorter.addParser({id:"cDate",is:function(){return!1},format:function(a){return a},type:"numeric"}),a.tablesorter.addParser({id:"eps",is:function(){return!1},format:function(a){var b=a.match(/^(.*)/);if(null===b||"?"===b[1])return-10;var d=b[1].split(" / ");if(-1!==d[0].indexOf("+")){var e=d[0].split("+");d[0]=e[0]}if(d[0]=parseInt(d[0]),d[1]=parseInt(d[1]),0===d[0])return d[1];var f=parseInt(c.getMeta("max_download_count")*d[0]/d[1]),g=Math.round(d[0]/d[1]*100)/1e3;return f>0&&(f+=d[0]),f+g},type:"numeric"}),jconfirm.defaults={theme:"dark",type:"blue",typeAnimated:!0,confirm:function(){location.href=this.$target.attr("href")}},a("a.shutdown").confirm({title:b("Shutdown"),content:b("Are you sure you want to shutdown SiCKRAGE ?")}),a("a.restart").confirm({title:b("Restart"),content:b("Are you sure you want to restart SiCKRAGE ?")}),a("a.submiterrors").confirm({title:b("Submit Errors"),content:b('Are you sure you want to submit these errors ?<br><br><span class="red-text">Make sure SiCKRAGE is updated and trigger<br> this error with debug enabled before submitting</span>')}),a("#removeW").click(function(){a("#white option:selected").remove().appendTo("#pool")}),a("#addW").click(function(){a("#pool option:selected").remove().appendTo("#white")}),a("#addB").click(function(){a("#pool option:selected").remove().appendTo("#black")}),a("#removeP").click(function(){a("#pool option:selected").remove()}),a("#removeB").click(function(){a("#black option:selected").remove().appendTo("#pool")}),a("#addToWhite").click(function(){var b=a("#addToPoolText").val();if(""!==b){var c=a("<option>");c.attr("value",b),c.html(b),c.appendTo("#white"),a("#addToPoolText").val("")}}),a("#addToBlack").click(function(){var b=a("#addToPoolText").val();if(""!==b){var c=a("<option>");c.attr("value",b),c.html(b),c.appendTo("#black"),a("#addToPoolText").val("")}}),a(".enabler").each(function(){a(this).prop("checked")||a("#content_"+a(this).attr("id")).hide()}),a(".enabler").on("click",function(){a(this).prop("checked")?a("#content_"+a(this).attr("id")).fadeIn("fast","linear"):a("#content_"+a(this).attr("id")).fadeOut("fast","linear")}),c.browser.init(),c.root_dirs.init(),c.quality_chooser.init(),c.check_notifications(),a("body").animate({paddingTop:a("nav").height()+5});var f=function(){scrollBy(0,-a("nav").height())};location.hash&&f(),window.addEventListener("hashchange",f),a.ajaxSetup({beforeSend:function(a){c.xhrPool.push(a)},complete:function(a){var b=c.xhrPool.indexOf(a);b>-1&&c.xhrPool.splice(b,1)}}),a(window).unload(function(){c.xhrAbortAll()})}},ajax_search:{searchStatusUrl:"/home/getManualSearchStatus",failedDownload:!1,qualityDownload:!1,selectedEpisode:"",manualSearches:[],init:function(){PNotify.prototype.options.maxonscreen=5,c.ajax_search.searchStatusUrl=c.srWebRoot+c.ajax_search.searchStatusUrl,c.ajax_search.ajaxEpSearch({colorRow:!0}),c.ajax_search.checkManualSearches(),c.ajax_search.ajaxEpSubtitlesSearch()},enableLink:function(a){a.on("click.disabled",!1),a.prop("enableClick","1"),a.fadeTo("fast",1)},disableLink:function(a){a.off("click.disabled"),a.prop("enableClick","0"),a.fadeTo("fast",.5)},updateImages:function(d){a.each(d.episodes,function(d,e){var f="",g=a("a[id="+e.show+"x"+e.season+"x"+e.episode+"]"),h=g.children("img"),i=g.parent();if(g){var j="";"searching"===e.searchstatus.toLowerCase()?(h.prop("title",b("Searching")),h.prop("alt","searching"),h.prop("src",c.srWebRoot+"/images/loading16.gif"),c.ajax_search.disableLink(g),f=e.searchstatus):"queued"===e.searchstatus.toLowerCase()?(h.prop("title",b("Queued")),h.prop("alt","queued"),h.prop("src",c.srWebRoot+"/images/queued.png"),c.ajax_search.disableLink(g),f=e.searchstatus):"finished"===e.searchstatus.toLowerCase()&&(h.prop("title",b("Searching")),h.prop("alt","searching"),h.parent().prop("class","epRetry"),h.prop("src",c.srWebRoot+"/images/search16.png"),c.ajax_search.enableLink(g),j=/(\w+)\s\((.+?)\)/,f=e.status.replace(j,'$1 <span class="quality '+e.quality+'">$2</span>'),i.closest("tr").prop("class",e.overview+" season-"+e.season+" seasonstyle")),i.siblings(".col-status").html(f)}var k=a("a[id=forceUpdate-"+e.show+"x"+e.season+"x"+e.episode+"]"),l=k.children("img");k&&("searching"===e.searchstatus.toLowerCase()?(l.prop("title",b("Searching")),l.prop("alt","searching"),l.prop("src",c.srWebRoot+"/images/loading16.gif"),c.ajax_search.disableLink(k)):"queued"===e.searchstatus.toLowerCase()?(l.prop("title",b("Queued")),l.prop("alt","queued"),l.prop("src",c.srWebRoot+"/images/queued.png")):"finished"===e.searchstatus.toLowerCase()&&(l.prop("title",b("Manual Search")),l.prop("alt","[search]"),l.prop("src",c.srWebRoot+"/images/search16.png"),"snatched"===e.overview.toLowerCase()?k.closest("tr").remove():c.ajax_search.enableLink(k)))})},manualSearch:function(d){var e,f,g,h=c.ajax_search.selectedEpisode.parent(),i=c.ajax_search.selectedEpisode,j=c.ajax_search.selectedEpisode.children("img");j.prop("title",b("loading")),j.prop("alt",""),j.prop("src",c.srWebRoot+"/images/"+d.loadingImage);var k=c.ajax_search.selectedEpisode.prop("href");return!1===c.ajax_search.failedDownload&&(k=k.replace("retryEpisode","searchEpisode")),k=k+"&downCurQuality="+(c.ajax_search.qualityDownload?"1":"0"),a.getJSON(k,function(a){if("failure"===a.result.toLowerCase())e=d.noImage,f="failed";else{e=d.loadingImage,f="success",d.colorRow&&h.parent().removeClass("skipped wanted qual good unaired").addClass("snatched");g=a.result.replace(/(\w+)\s\((.+?)\)/,'$1 <span class="quality '+a.quality+'">$2</span>'),h.siblings(".col-status").html(g),c.ajax_search.disableLink(i)}j.prop("title",f),j.prop("alt",f),j.prop("height",d.size),j.prop("src",c.srWebRoot+"/images/"+e)}),!1},checkManualSearches:function(){var b=5e3,d=a("#showID").val(),e=void 0!==d?c.ajax_search.searchStatusUrl+"?show="+d:c.ajax_search.searchStatusUrl;a.ajax({url:e,success:function(a){b=a.episodes?5e3:15e3,c.ajax_search.updateImages(a)},error:function(){b=3e4},type:"GET",dataType:"json",complete:function(){setTimeout(c.ajax_search.checkManualSearches,b)},timeout:15e3})},ajaxEpSearch:function(b){var d={size:16,colorRow:!1,loadingImage:"loading16.gif",queuedImage:"queued.png",noImage:"no16.png",yesImage:"yes16.png"};b=a.extend({},d,b),a(".epRetry").click(function(b){if(console.log("Retrying episode search"),b.preventDefault(),"0"===a(this).prop("enableClick"))return!1;c.ajax_search.selectedEpisode=a(this),a("#manualSearchModalFailed").modal("show")}),a(".epSearch").click(function(d){if(d.preventDefault(),"0"===a(this).prop("enableClick"))return!1;c.ajax_search.selectedEpisode=a(this),a(this).parent().parent().children(".col-status").children(".quality").length?a("#manualSearchModalQuality").modal("show"):c.ajax_search.manualSearch(b)}),a("#manualSearchModalFailed .btn").click(function(){c.ajax_search.failedDownload="yes"===a(this).text().toLowerCase(),a("#manualSearchModalQuality").modal("show")}),a("#manualSearchModalQuality .btn").click(function(){c.ajax_search.qualityDownload="yes"===a(this).text().toLowerCase(),c.ajax_search.manualSearch(b)})},ajaxEpSubtitlesSearch:function(){a(".epSubtitlesSearch").click(function(){var d=a(this).parent().siblings(".col-subtitles"),e=a(this);return e.empty(),e.append(a("<img/>").attr({src:c.srWebRoot+"/images/loading16.gif",alt:"",title:b("loading")})),a.getJSON(a(this).attr("href"),function(b){if("failure"!==b.result.toLowerCase()&&"no subtitles downloaded"!==b.result.toLowerCase()){var f=b.subtitles.split(",");d.empty(),a.each(f,function(b,e){""!==e&&"und"!==e&&(f.length,d.append(a("<img/>").attr({src:c.srWebRoot+"/images/subtitles/flags/"+e+".png",alt:e,width:16,height:11})))}),e.remove()}else e.remove()}),!1})},ajaxEpMergeSubtitles:function(){a(".epMergeSubtitles").click(function(){var d=a(this);return d.empty(),d.append(a("<img/>").attr({src:c.srWebRoot+"/images/loading16.gif",alt:"",title:b("loading")})),a.getJSON(a(this).attr("href"),function(){d.remove()}),!1})}},browser:{defaults:{title:b("Choose Directory"),url:"/browser/",autocompleteURL:"/browser/complete",includeFiles:0,fileTypes:[],showBrowseButton:!0},fileBrowserDialog:null,currentBrowserPath:null,currentRequest:null,init:function(){c.browser.defaults.url=c.srWebRoot+c.browser.defaults.url,c.browser.defaults.autocomplete=c.srWebRoot+c.browser.defaults.autocompleteURL,a.fn.fileBrowser=c.browser.fileBrowser,a.fn.nFileBrowser=c.browser.nFileBrowser},browse:function(b,d,e,f){c.browser.currentBrowserPath!==b&&(c.browser.currentBrowserPath=b,c.browser.currentRequest&&c.browser.currentRequest.abort(),c.browser.fileBrowserDialog.dialog("option","dialogClass","browserDialog busy"),c.browser.currentRequest=a.getJSON(d,{path:b,includeFiles:e,fileTypes:f.join(",")},function(b){c.browser.fileBrowserDialog.empty();var g,h=b[0],i=0,j=null;b=a.grep(b,function(){return 0!=i++}),a('<input class="form-control input-sm">').val(h.currentPath).on("keypress",function(a){13===a.which&&c.browser.browse(a.target.value,d,e,f)}).appendTo(c.browser.fileBrowserDialog).fileBrowser({showBrowseButton:!1}).on("autocompleteselect",function(a,b){c.browser.browse(b.item.value,d,e,f)}),g=a("<ul>").appendTo(c.browser.fileBrowserDialog),a.each(b,function(b,h){if(h.isFile&&f&&(!h.isAllowed||-1!==f.indexOf("images")&&!h.isImage))return!0;j=a('<a href="javascript:void(0)">').on("click",function(){h.isFile?(c.browser.currentBrowserPath=h.path,a('.browserDialog .ui-button:contains("Ok")').click()):c.browser.browse(h.path,d,e,f)}).text(h.name),h.isImage?j.prepend('<span class="ui-icon ui-icon-image"></span>'):h.isFile?j.prepend('<span class="ui-icon ui-icon-blank"></span>'):j.prepend('<span class="ui-icon ui-icon-folder-collapsed"></span>').on("mouseenter",function(){a("span",this).addClass("ui-icon-folder-open")}).on("mouseleave",function(){a("span",this).removeClass("ui-icon-folder-open")}),j.appendTo(g)}),a("a",g).wrap('<li class="ui-state-default ui-corner-all">'),c.browser.fileBrowserDialog.dialog("option","dialogClass","browserDialog")}))},nFileBrowser:function(d,e){e=a.extend({},c.browser.defaults,e),c.browser.fileBrowserDialog?c.browser.fileBrowserDialog.dialog("option","title",e.title):c.browser.fileBrowserDialog=a('<div id="fileBrowserDialog" style="display:hidden"></div>').appendTo("body").dialog({dialogClass:"browserDialog",title:e.title,minWidth:Math.min(a(document).width()-80,650),height:Math.min(a(document).height()-80,a(window).height()-80),maxHeight:Math.min(a(document).height()-80,a(window).height()-80),maxWidth:a(document).width()-80,modal:!0,autoOpen:!1}),c.browser.fileBrowserDialog.dialog("option","buttons",[{text:b("Ok"),class:"btn",click:function(){d(c.browser.currentBrowserPath,e),a(this).dialog("close")}},{text:b("Cancel"),class:"btn",click:function(){a(this).dialog("close")}}]);var f="";return e.initialDir&&(f=e.initialDir),c.browser.browse(f,e.url,e.includeFiles,e.fileTypes),c.browser.fileBrowserDialog.dialog("open"),!1},fileBrowser:function(b){if(b=a.extend({},c.browser.defaults,b),b.field=a(this),b.field.autocomplete&&b.autocompleteURL){var d="";b.field.autocomplete({position:{my:"top",at:"bottom",collision:"flipfit"},source:function(c,e){d=a.ui.autocomplete.escapeRegex(c.term,b.includeFiles),a.ajax({url:b.autocompleteURL,data:c,dataType:"json",success:function(b){var c=new RegExp("^"+d,"i"),f=a.grep(b,function(a){return c.test(a)});e(f)}})},open:function(){a(".ui-autocomplete li.ui-menu-item a").removeClass("ui-corner-all"),a(".ui-autocomplete li.ui-menu-item:odd a").addClass("ui-menu-item-alternate")}}).data("ui-autocomplete")._renderItem=function(b,c){var e=c.label,f=new RegExp("(?![^&;]+;)(?!<[^<>]*)("+d+")(?![^<>]*>)(?![^&;]+;)","gi");return e=e.replace(f,function(a){return"<b>"+a+"</b>"}),a("<li></li>").data("ui-autocomplete-item",c).append("<a class='nowrap'>"+e+"</a>").appendTo(b)}}var e,f,g=!1;try{g=!!localStorage.getItem}catch(a){}return g&&b.key&&(e=localStorage["fileBrowser-"+b.key]),b.key&&0===b.field.val().length&&e&&b.field.val(e),f=function(a,b){b.field.val(a),g&&b.key&&(localStorage["fileBrowser-"+b.key]=a)},b.field.addClass("fileBrowserField"),b.showBrowseButton&&b.field.after(a('<div class="input-group-addon"><a href="#" class="fileBrowser glyphicon glyphicon-search""></a></div>').on("click",function(){var c=b.field.val()||b.key&&e||"",d=a.extend({},b,{initialDir:c});return a(this).nFileBrowser(f,d),!1})),b.field}},root_dirs:{init:function(){for(var b=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=b.length,e=window.console=window.console||{};d--;){var f=b[d];e[f]||(e[f]=function(){})}a("#addRootDir").click(function(){a(this).nFileBrowser(c.root_dirs.addRootDir)}),a("#editRootDir").click(function(){a(this).nFileBrowser(c.root_dirs.editRootDir,{initialDir:a("#rootDirs option:selected").val()})}),a("#deleteRootDir").click(function(){if(a("#rootDirs option:selected").length){var b=a("#rootDirs option:selected"),d=b.attr("id")===a("#whichDefaultRootDir").val(),f=a("#rootDirs option:selected").attr("id").substr(3);if(b.remove(),c.root_dirs.syncOptionIDs(),d)e.log("new default when deleting"),a("#whichDefaultRootDir").val(""),a("#rootDirs option").length&&c.root_dirs.setDefault(a("#rootDirs option").attr("id"));else if(a("#whichDefaultRootDir").val().length){var g=a("#whichDefaultRootDir").val().substr(3);g>f&&a("#whichDefaultRootDir").val("rd-"+(g-1))}}c.root_dirs.refreshRootDirs(),a.get(c.srWebRoot+"/config/general/saveRootDirs",{rootDirString:a("#rootDirText").val()})}),a("#defaultRootDir").click(function(){a("#rootDirs option:selected").length&&c.root_dirs.setDefault(a("#rootDirs option:selected").attr("id")),c.root_dirs.refreshRootDirs(),a.get(c.srWebRoot+"/config/general/saveRootDirs",{rootDirString:a("#rootDirText").val()})}),a("#rootDirs").click(c.root_dirs.refreshRootDirs),c.root_dirs.syncOptionIDs(),c.root_dirs.setDefault(a("#whichDefaultRootDir").val(),!0),c.root_dirs.refreshRootDirs()},addRootDir:function(b){if(b.length){var d=!1;a("#whichDefaultRootDir").val().length||(d=!0),a("#rootDirs").append('<option value="'+b+'">'+b+"</option>"),c.root_dirs.syncOptionIDs(),d&&c.root_dirs.setDefault(a("#rootDirs option").attr("id")),c.root_dirs.refreshRootDirs(),a.get(c.srWebRoot+"/config/general/saveRootDirs",{rootDirString:a("#rootDirText").val()})}},editRootDir:function(b){b.length&&(a("#rootDirs option:selected").length&&(a("#rootDirs option:selected").attr("id")===a("#whichDefaultRootDir").val()?a("#rootDirs option:selected").text("*"+b):a("#rootDirs option:selected").text(b),a("#rootDirs option:selected").val(b)),c.root_dirs.refreshRootDirs(),a.get(c.srWebRoot+"/config/general/saveRootDirs",{rootDirString:a("#rootDirText").val()}))},setDefault:function(b,c){if((void 0===b||b.length)&&(a("#whichDefaultRootDir").val()!==b||!0===c)){if("*"!==a("#"+b).text().charAt(0)&&a("#"+b).text("*"+a("#"+b).text()),a("#whichDefaultRootDir").val()&&!0!==c){var d=a("#"+a("#whichDefaultRootDir").val());d.text(d.text().substring(1))}a("#whichDefaultRootDir").val(b)}},syncOptionIDs:function(){var b=0;a("#rootDirs option").each(function(){a(this).attr("id","rd-"+b++)})},refreshRootDirs:function(){if(a("#rootDirs").length){var b="true";c.root_dirs.syncOptionIDs(),!a("#rootDirs option:selected").length&&a("#whichDefaultRootDir").val().length&&a("#"+a("#whichDefaultRootDir").val()).prop("selected",!0),a("#rootDirs option:selected").length&&(b=""),a("#deleteRootDir").prop("disabled",b),a("#defaultRootDir").prop("disabled",b),a("#editRootDir").prop("disabled",b);var d="",e="";a("#whichDefaultRootDir").val().length>=4&&(e=a("#whichDefaultRootDir").val().substr(3)),a("#rootDirs option").each(function(){d+=a(this).val()+"="+a(this).text()+"->"+a(this).attr("id")+"\n",e.length&&(e+="|"+a(this).val())}),d+="def: "+a("#whichDefaultRootDir").val(),a("#rootDirText").val(e),a("#rootDirText").change()}}},quality_chooser:{init:function(){a("#qualityPreset").change(function(){c.quality_chooser.setFromPresets(a("#qualityPreset :selected").val())}),c.quality_chooser.setFromPresets(a("#qualityPreset :selected").val())},setFromPresets:function(b){if(0===parseInt(b))return void a("#customQuality").show();a("#customQuality").hide(),a("#anyQualities option").each(function(){(b&a(this).val())>0?a(this).attr("selected","selected"):a(this).attr("selected",!1)}),a("#bestQualities option").each(function(){(b&a(this).val()<<16)>0?a(this).attr("selected","selected"):a(this).attr("selected",!1)})}},root:{init:function(){},schedule:function(){if(c.isMeta("sickrage.COMING_EPS_LAYOUT",["list"])){var b={date:0,show:2,network:5},d=c.getMeta("sickrage.COMING_EPS_SORT"),e=d in b?[[b[d],0]]:[[0,0]];a("#showListTable:has(tbody tr)").tablesorter({widgets:["stickyHeaders","filter","columnSelector","saveSort","reflow"],sortList:e,textExtraction:{0:function(b){return a(b).find("time").attr("datetime")},1:function(b){return a(b).find("time").attr("datetime")},7:function(b){return a(b).find("span").text().toLowerCase()}},headers:{0:{sorter:"realISODate"},1:{sorter:"realISODate"},2:{sorter:"loadingNames"},4:{sorter:"loadingNames"},7:{sorter:"quality"},8:{sorter:!1},9:{sorter:!1}},widgetOptions:function(){return c.metaToBool("sickrage.FILTER_ROW")?{filter_columnFilters:!0,filter_hideFilters:!0,filter_saveFilters:!0,columnSelector_mediaquery:!1}:{filter_columnFilters:!1,columnSelector_mediaquery:!1}}()}),c.ajax_search.ajaxEpSearch()}c.isMeta("sickrage.COMING_EPS_LAYOUT",["banner","poster"])&&(c.ajax_search.ajaxEpSearch({size:16,loadingImage:"loading16"+c.themeSpinner+".gif"}),a(".ep_summary").hide(),a(".ep_summaryTrigger").click(function(){a.next(".ep_summary").slideToggle("normal",function(){a.prev(".ep_summaryTrigger").attr("src",function(b,c){return a.next(".ep_summary").is(":visible")?c.replace("plus","minus"):c.replace("minus","plus")})})})),a("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",function(){a.tablesorter.columnSelector.attachTo(a("#showListTable"),"#popover-target")})},history:function(){a("#historyTable:has(tbody tr)").tablesorter({widgets:["zebra","filter","reflow"],sortList:[[0,1]],textExtraction:function(){return c.isMeta("sickrage.HISTORY_LAYOUT",["detailed"])?{0:function(b){return a(b).find("time").attr("datetime")},4:function(b){return a(b).find("span").text().toLowerCase()}}:{0:function(b){return a(b).find("time").attr("datetime")},1:function(b){return a(b).find("span").text().toLowerCase()},2:function(b){return a(b).attr("data-provider").toLowerCase()},5:function(b){return a(b).attr("data-quality").toLowerCase()}}}(),headers:function(){return c.isMeta("sickrage.HISTORY_LAYOUT",["detailed"])?{0:{sorter:"realISODate"},4:{sorter:"data-quality"}}:{0:{sorter:"realISODate"},4:{sorter:!1},5:{sorter:"data-quality"}}}()}),a("#history_limit").on("change",function(){window.location.href=c.srWebRoot+"/history/?limit="+a(this).val()}),a("a.clearhistory").confirm({title:b("Clear History"),content:b("Are you sure you want to clear all download history ?")}),a("a.trimhistory").confirm({title:b("Trim History"),content:b("Are you sure you want to trim all download history older than 30 days ?")})},api_builder:function(){a("[data-action=api-call]").on("click",function(){var b=a("[data-command="+a(this).data("command-name")+"]"),c=a("#option-profile").is(":checked"),d=a(this).data("target"),e=a(this).data("time"),f=a("#"+a(this).data("base-url")).text(),g=a(this).data("url");a.each(b,function(b,c){var d=a(c).attr("name"),e=a(c).val();void 0!==d&&void 0!==e&&d!==e&&e&&(a.isArray(e)&&(e=e.join("|")),f+="&"+d+"="+e)}),c&&(f+="&profile=1");var h=(new Date).getTime();a.get(f,function(b,c,i){var j=(new Date).getTime()-h,k=a("#option-jsonp").is(":checked"),l=i.getResponseHeader("content-type")||"",m=a(d);if(a(e).text(j+"ms"),a(g).text(f+(k?"&jsonp=foo":"")),"image/"===l.slice(0,6))m.html(a("<img/>").attr("src",f));else{var n=JSON.stringify(b,null,4);k?m.text("foo("+n+");"):m.text(n)}m.parents(".result-wrapper").removeClass("hidden")})}),a("[data-action=clear-result]").on("click",function(){a(a(this).data("target")).html("").parents(".result-wrapper").addClass("hidden")}),a("[data-action=update-episodes]").on("change",function(){var b=a(this).data("command"),c=a("[data-command="+b+"][name=episode]"),d=a(this).val(),e=a("[data-command="+b+"][name=indexerid]").val(),f=c.val();if(void 0!==c){c.removeClass("hidden"),c.find("option:gt(0)").remove();for(var g in f[e][d])f[e][d].hasOwnProperty(g)&&c.append(a("<option>",{value:g,label:"Episode "+g}))}}),a("[data-action=update-seasons]").on("change",function(){var b=a(this).data("command"),c=a("[data-command="+b+"][name=season]"),d=a(this).val(),e=c.val();if(void 0!==c){c.removeClass("hidden"),c.find("option:gt(0)").remove();for(var f in e[d])e[d].hasOwnProperty(f)&&c.append(a("<option>",{value:f,label:0===f?"Specials":"Season "+f}))}}),a("#command-search").typeahead({source:c.getMeta("commands")}),a("#command-search").on("change",function(){var b=a(this).typeahead("getActive");if(b){var c=b.replace(".","-");a("[href=#command-"+c+"]").click()}})},status:function(){a("#schedulerStatusTable").tablesorter({widgets:["saveSort","zebra","reflow"]}),a("#queueStatusTable").tablesorter({widgets:["saveSort","zebra","reflow"],sortList:[[3,0],[4,0],[2,1]]})}},google:{init:function(){},login:function(){a.ajax({dataType:"json",url:c.srWebRoot+"/google/get_user_code",type:"POST",success:function(d){var e=b("<center><h1>"+d.user_code+'</h1><br/>From any computer, please visit <a href="'+d.verification_url+'" target="_blank">'+d.verification_url+"</a> and enter the code</center>");a("#login-dialog").dialog({modal:!0,draggable:!1,width:"25%",title:b("Link SiCKRAGE")}).html(e),c.google.poll_auth(d,(new Date).getTime()+1e3*new Date(d.user_code_expiry).getTime(),d.interval)}})},logout:function(){a.ajax({url:c.srWebRoot+"/google/logout",success:function(){localStorage.clear(),location.reload()}})},poll_auth:function(b,d,e){(new Date).getTime()<d&&a.ajax({dataType:"json",url:c.srWebRoot+"/google/get_credentials",data:{flow_info:JSON.stringify(b)},type:"POST",success:function(f){f.error?("slow_down"===f.error&&(e+=5),setTimeout(function(){c.google.poll_auth(b,d,e)},1e3*e)):(a("#login-dialog").dialog("close"),localStorage.setItem("google_refresh_token",f.refresh_token),localStorage.setItem("google_access_token",f.access_token),localStorage.setItem("google_token_type",f.token_type),location.reload())}})},refresh_auth:function(){a.ajax({dataType:"json",url:c.srWebRoot+"/google/refresh_credentials",data:{token:localStorage.getItem("google_refresh_token")},type:"POST",success:function(a){localStorage.setItem("google_access_token",a.access_token),localStorage.setItem("google_token_type",a.token_type)},error:function(){c.google.logout()}})}},home:{init:function(){c.home.add_show_options(),c.root_dirs.init()},index:function(){function b(b){var c,d,e;b<125?e=3:b<175?(c=9,d=40,e=4):(c=11,d=50,e=6),a("#posterPopup").remove(),void 0===c?a(".show-details").hide():(a(".show-details").show(),a(".show-dlstats, .show-quality").css("fontSize",c),a(".show-network-image").css("width",d)),a(".show-container").css({width:b,borderRadius:e})}a(".resetsorting").on("click",function(){a("table").trigger("filterReset")}),a("#filterShowName").on("input",_.debounce(function(){a(".show-grid").isotope({filter:function(){return a(this).find(".show-title").html().trim().toLowerCase().indexOf(a("#filterShowName").val().toLowerCase())>-1}})},500)),a("#posterSizeSlider").slider({min:75,max:250,value:localStorage.posterSize||188,change:function(c,d){window.localStorage&&localStorage.setItem("posterSize",d.value),b(d.value),a(".show-grid").isotope("layout")}}),b(parseInt(localStorage.posterSize||188)),a(".progressbar").each(function(){var b=a(this).data("progress-percentage"),c=100===b?100:b>80?80:b>60?60:b>40?40:20;a(this).progressbar({value:b}),a(this).data("progress-text")&&a(this).append('<div class="progressbarText" title="'+a(this).data("progress-tip")+'">'+a(this).data("progress-text")+"</div>"),a(this).find(".ui-progressbar-value").addClass("progress-"+c)}),a("img#network").on("error",function(){a(this).parent().text(a(this).attr("alt")),a(this).remove()}),a("#showListTableShows:has(tbody tr), #showListTableAnime:has(tbody tr)").tablesorter({sortList:[[7,1],[2,0]],textExtraction:{0:function(b){return a(b).find("time").attr("datetime")},1:function(b){return a(b).find("time").attr("datetime")},3:function(b){return a(b).find("span").prop("title").toLowerCase()},4:function(b){return a(b).find("span").text().toLowerCase()},5:function(b){return a(b).find("span:first").text()},6:function(b){return a(b).data("show-size")},7:function(b){return a(b).find("img").attr("alt")}},widgets:["saveSort","zebra","stickyHeaders","filter","columnSelector"],headers:function(){return c.metaToBool("sickrage.FILTER_ROW")?{0:{sorter:"realISODate"},1:{sorter:"realISODate"},2:{sorter:"loadingNames"},4:{sorter:"quality"},5:{sorter:"eps"},6:{sorter:"digit"},7:{filter:"parsed"}}:{0:{sorter:"realISODate"},1:{sorter:"realISODate"},2:{sorter:"loadingNames"},4:{sorter:"quality"},5:{sorter:"eps"},6:{sorter:"digit"}}}(),widgetOptions:function(){return c.metaToBool("sickrage.FILTER_ROW")?{filter_columnFilters:!0,filter_hideFilters:!0,filter_functions:{5:function(a,b,c){var d=!1,e=Math.floor(b%1*1e3);if(""===c)d=!0;else{var f=c.match(/(<|<=|>=|>)\s(\d+)/i);f&&("<"===f[1]?e<parseInt(f[2])&&(d=!0):"<="===f[1]?e<=parseInt(f[2])&&(d=!0):">="===f[1]?e>=parseInt(f[2])&&(d=!0):">"===f[1]&&e>parseInt(f[2])&&(d=!0)),f=c.match(/(\d+)\s(-|to)\s(\d+)/i),f&&("-"!==f[2]&&"to"!==f[2]||e>=parseInt(f[1])&&e<=parseInt(f[3])&&(d=!0)),f=c.match(/(=)?\s?(\d+)\s?(=)?/i),f&&("="!==f[1]&&"="!==f[3]||parseInt(f[2])===e&&(d=!0)),!isNaN(parseFloat(c))&&isFinite(c)&&parseInt(c)===e&&(d=!0)}return d}},columnSelector_mediaquery:!1}:{filter_columnFilters:!1}}(),sortStable:!0,sortAppend:[[2,0]]}),a(".show-grid").imagesLoaded(function(){a(".show-grid").show().isotope({itemSelector:".show-container",sortBy:c.getMeta("sickrage.POSTER_SORTBY"),sortAscending:c.getMeta("sickrage.POSTER_SORTDIR"),layoutMode:"masonry",masonry:{isFitWidth:!0},getSortData:{name:function(b){var d=a(b).attr("data-name")||"";return(c.metaToBool("sickrage.SORT_ARTICLE")?d:d.replace(/^((?:The|A|An)\s)/i,"")).toLowerCase()},network:"[data-network]",date:function(b){var c=a(b).attr("data-date");return c.length&&parseInt(c,10)||Number.POSITIVE_INFINITY},progress:function(b){var c=a(b).attr("data-progress");return c.length&&parseInt(c,10)||Number.NEGATIVE_INFINITY}}});var b=null;a(".show-container").on("mouseenter",function(){var c=a(this);"none"===c.find(".show-details").css("display")&&(b=setTimeout(function(){b=null,a("#posterPopup").remove();var d=c.clone().attr({id:"posterPopup"}),e=c.offset().left,f=c.offset().top;d.css({position:"absolute",margin:0,top:f,left:e,zIndex:9999}),d.find(".show-details").show(),d.on("mouseleave",function(){a(this).remove()}),d.appendTo("body");var g=f+c.height()/2-219,h=e+c.width()/2-125,i=a(window).scrollTop(),j=a(window).scrollLeft(),k=i+a(window).innerHeight(),l=j+a(window).innerWidth();g<i+5&&(g=i+5),h<j+5&&(h=j+5),g+438+5>k&&(g=k-438-5),h+250+5>l&&(h=l-250-5),d.animate({top:g,left:h,width:250,height:438})},300))}).on("mouseleave",function(){null!==b&&clearTimeout(b)})}),a("#showListTableShows").find("tbody").find("tr").length>0&&a.tablesorter.filter.bindSearch("#showListTableShows",a(".search")),c.metaToBool("sickrage.ANIME_SPLIT_HOME")&&a("#showListTableAnime").find("tbody").find("tr").length>0&&a.tablesorter.filter.bindSearch("#showListTableAnime",a(".search")),a("#postersort").on("change",function(){var b=a(this).val();a(".show-grid").isotope({sortBy:b}),a.post(a(this).find("option[value="+a(this).val()+"]").attr("data-sort"))}),a("#postersortdirection").on("change",function(){var b="true"===a(this).val();a(".show-grid").isotope({sortAscending:b}),a.post(a(this).find("option[value="+a(this).val()+"]").attr("data-sort"))}),a("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",function(){
a.tablesorter.columnSelector.attachTo(a("#showListTableShows"),"#popover-target"),c.metaToBool("sickrage.ANIME_SPLIT_HOME")&&a.tablesorter.columnSelector.attachTo(a("#showListTableAnime"),"#popover-target")})},display_show:{init:function(){c.metaToBool("sickrage.FANART_BACKGROUND")&&(a.backstretch(c.srWebRoot+"/images/"+a("#showID").attr("value")+".fanart.jpg"),a(".backstretch").css("opacity",c.getMeta("sickrage.FANART_BACKGROUND_OPACITY")).fadeIn("500")),a("#showTable, #animeTable").tablesorter({widgets:["saveSort","columnSelector"],widgetOptions:{columnSelector_saveColumns:!0,columnSelector_layout:'<br><label><input type="checkbox">{name}</label>',columnSelector_mediaquery:!1,columnSelector_cssChecked:"checked"}}),a("#popover").popover({placement:"bottom",html:!0,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",function(){a.tablesorter.columnSelector.attachTo(a("#showTable, #animeTable"),"#popover-target")}),a(".imdbstars").each(function(b,c){a(c).html(a("<span>").width(12*a(c).text()))}),a("#seasonJump").on("change",function(){var b=a("#seasonJump option:selected").val();if(b&&"jump"!==b){var c=a("#seasonJump option:selected").data("season");a("html,body").animate({scrollTop:a('[name ="'+b.substring(1)+'"]').offset().top-50},"slow"),a("#collapseSeason-"+c).collapse("show"),location.hash=b}a(this).val("jump")}),a("#prevShow").on("click",function(){a("#pickShow option:selected").prev("option").prop("selected","selected"),a("#pickShow").change()}),a("#nextShow").on("click",function(){a("#pickShow option:selected").next("option").prop("selected","selected"),a("#pickShow").change()}),a("#changeStatus").on("click",function(){var b=[];if(a(".epCheck").each(function(){a(this).prop("checked")&&b.push(a(this).attr("id"))}),0===b.length)return!1;window.location.href=c.srWebRoot+"/home/setStatus?show="+a("#showID").attr("value")+"&eps="+b.join("|")+"&status="+a("#statusSelect").val()}),a("#deleteEpisode").on("click",function(){var b=[];if(a(".epCheck").each(function(){a(this).prop("checked")&&b.push(a(this).attr("id"))}),0===b.length)return!1;window.location.href=c.srWebRoot+"/home/deleteEpisode?show="+a("#showID").attr("value")+"&eps="+b.join("|")}),a(".seasonCheck").on("click",function(){var b=this,c=a(this).attr("id");a("#collapseSeason-"+c).collapse("show"),a(".epCheck:visible").each(function(){a(this).attr("id").split("x")[0]===c&&a(this).prop("checked",b.checked)})});var d=null;a(".epCheck").on("click",function(b){if(!d||!b.shiftKey)return void(d=this);var c=this,e=0;a(".epCheck").each(function(){switch(e){case 2:return!1;case 1:a(this).prop("checked",d.checked)}a(this)!==c&&a(this)!==d||e++})}),a(".seriesCheck").on("click",function(){a(".epCheck:visible").each(function(){a(this).prop("checked",!0)}),a(".seasonCheck:visible").each(function(){a(this).prop("checked",!0)})}),a(".clearAll").on("click",function(){a(".epCheck:visible").each(function(){a(this).prop("checked",!1)}),a(".seasonCheck:visible").each(function(){a(this).prop("checked",!1)})}),a("#pickShow").on("change",function(){var b=a(this).val();0!==b&&(window.location.href=c.srWebRoot+"/home/displayShow?show="+b)}),a("#checkboxControls input").change(function(){var b=a(this).attr("id"),d=a("#checkboxControls > input, #"+b).prop("checked");c.showHideRows(b,d)}),a("#checkboxControls input").each(function(){var b=a(this).prop("checked");a("tr."+a(this).attr("id")).each(function(){b?a(this).show():a(this).hide()})}),a("tr.seasonheader").each(function(){var b=0,c=a(this).attr("id");a("tr."+c+" :visible").each(function(){b++}),0===b?(a(this).hide(),a("#"+c+"-cols").hide()):(a(this).show(),a("#"+c+"-cols").show())}),a(".sceneSeasonXEpisode").on("change",function(){a(this).val(a(this).val().replace(/[^0-9xX]*/g,""));var b=a(this).attr("data-for-season"),d=a(this).attr("data-for-episode"),e=a(this).val().match(/^(\d+)x(\d+)$/i),f=null,g=null;e&&(f=e[1],g=e[2]),c.home.display_show.setEpisodeSceneNumbering(b,d,f,g)}),a(".sceneAbsolute").on("change",function(){a(this).val(a(this).val().replace(/[^0-9xX]*/g,""));var b=a(this).attr("data-for-absolute"),d=a(this).val().match(/^(\d{1,3})$/i),e=null;d&&(e=d[1]),c.home.display_show.setAbsoluteSceneNumbering(b,e)}),c.ajax_search.init(),a("a.removeshow").confirm({title:b("Remove Show"),content:b('Are you sure you want to remove <span class="footerhighlight">')+a("#showtitle").data("showname")+b('</span> from the database?<br><br><input type="checkbox" id="deleteFiles" name="deleteFiles"/>&nbsp;<label for="deleteFiles" class="red-text">Check to delete files as well. IRREVERSIBLE</label>'),buttons:{confirm:function(){var a=this.$content.find("#deleteFiles").prop("checked");location.href=this.$target.attr("href")+(a?"&full=1":"")},cancel:{action:function(){}}}})},setEpisodeSceneNumbering:function(d,e,f,g){var h=a("#showID").val(),i=a("#indexer").val();""===f&&(f=null),""===g&&(g=null),a.getJSON(c.srWebRoot+"/home/setSceneNumbering",{show:h,indexer:i,forSeason:d,forEpisode:e,sceneSeason:f,sceneEpisode:g},function(c){null===c.sceneSeason||null===c.sceneEpisode?a("#sceneSeasonXEpisode_"+h+"_"+d+"_"+e).val(""):a("#sceneSeasonXEpisode_"+h+"_"+d+"_"+e).val(c.sceneSeason+"x"+c.sceneEpisode),c.success||(c.errorMessage?alert(c.errorMessage):alert(b("Update failed.")))})},setAbsoluteSceneNumbering:function(d,e){var f=a("#showID").val(),g=a("#indexer").val();""===e&&(e=null),a.getJSON(c.srWebRoot+"/home/setSceneNumbering",{show:f,indexer:g,forAbsolute:d,sceneAbsolute:e},function(c){null===c.sceneAbsolute?a("#sceneAbsolute_"+f+"_"+d).val(""):a("#sceneAbsolute_"+f+"_"+d).val(c.sceneAbsolute),c.success||(c.errorMessage?alert(c.errorMessage):alert(b("Update failed.")))})}},edit_show:{init:function(){var d=[];a("#location").fileBrowser({title:b("Select Show Location")}),a("#submit").click(function(){var b=[];a("#exceptions_list option").each(function(){b.push(a(this).val())}),a("#exceptions_list").val(b),c.metaToBool("show.is_anime")&&c.generate_bwlist()}),a("#addSceneName").click(function(){var b=a("#SceneName").val(),c=a("<option>");if(d=[],a("#exceptions_list option").each(function(){d.push(a(this).val())}),a("#SceneName").val(""),!(a.inArray(b,d)>-1||""===b))return a("#SceneException").show(),c.attr("value",b),c.html(b),c.appendTo("#exceptions_list")}),a("#removeSceneName").click(function(){a("#exceptions_list option:selected").remove(),c.home.edit_show.toggleSceneException()}),c.home.edit_show.toggleSceneException()},toggleSceneException:function(){var b=[];a("#exceptions_list option").each(function(){b.push(a(this).val())}),""===b?a("#SceneException").hide():a("#SceneException").show()}},add_existing_shows:{init:function(){a("#tabs").tabs({collapsible:!0,selected:c.metaToBool("sickrage.SORT_ARTICLE")?-1:0}),a("#tableDiv").on("click","#checkAll",function(){a(".dirCheck").not(this).prop("checked",this.checked)}),a("#submitShowDirs").on("click",function(){var b=!1,c=a("#addShowForm");if(a(".dirCheck").each(function(){if(!0===this.checked){var d=a(this).attr("id"),e=a(this).closest("tr").find("select").val();a("<input>",{type:"hidden",name:"shows_to_add",value:e+"|"+d}).appendTo(c),b=!0}}),!1===b)return!1;a("<input>",{type:"hidden",name:"promptForSettings",value:a("#promptForSettings").prop("checked")?"on":"off"}).appendTo(c),c.submit()});var b="";a("#rootDirText").on("change",function(){if(b===a("#rootDirText").val())return!1;b=a("#rootDirText").val(),a("#rootDirStaticList").html(""),a("#rootDirs option").each(function(b,c){a("#rootDirStaticList").append('<li class="ui-state-default ui-corner-all"><input type="checkbox" class="cb dir_check" id="'+a(c).val()+'" checked=checked> <label for="'+a(c).val()+'"><b>'+a(c).val()+"</b></label></li>")}),c.home.add_existing_shows.loadContent()}),a("#rootDirStaticList").on("click",".dir_check",c.home.add_existing_shows.loadContent),a("#tableDiv").on("click",".showManage",function(b){b.preventDefault(),a("#tabs").tabs("option","active",0),a("html,body").animate({scrollTop:0},1e3)}),a("#rootDirs option").attr("selected","selected").parent().focus(),a("#rootDirs option").click()},loadContent:function(){var d="";a(".dir_check").each(function(b,c){a(c).is(":checked")&&(d.length&&(d+="&"),d+="rootDir="+encodeURIComponent(a(c).attr("id")))}),a("#tableDiv").html(b('<img id="searchingAnim" src="'+c.srWebRoot+'/images/loading32.gif" height="32" width="32" /> loading folders...')),a.get(c.srWebRoot+"/home/addShows/massAddTable/",d,function(b){a("#tableDiv").html(b),a("#addRootDirTable").tablesorter({sortList:[[1,0]],widgets:["zebra","reflow"],headers:{0:{sorter:!1}}})})},showGrid:function(){a("#showsort").val("original"),a("#showsortdirection").val("asc"),a("#showsort").on("change",function(){var b;switch(this.value){case"original":b="original-order";break;case"rating":a("#container").isotope({sortBy:"random"}),b="rating";break;case"rating_votes":b=["rating","votes"];break;case"votes":b="votes";break;default:b="name"}a("#container").isotope({sortBy:b})}),a("#showsortdirection").on("change",function(){a("#container").isotope({sortAscending:"asc"===this.value})}),a("#container").isotope({sortBy:"original-order",layoutMode:"fitRows",getSortData:{name:function(b){var d=a(b).attr("data-name")||"";return(c.metaToBool("sickrage.SORT_ARTICLE")?d:d.replace(/^((?:The|A|An)\s)/i,"")).toLowerCase()},rating:"[data-rating] parseInt",votes:"[data-votes] parseInt"}})}},postprocess:function(){a("#episodeDir").fileBrowser({title:b("Select Unprocessed Episode Folder"),key:"postprocessPath"})},trakt_shows:{init:function(){a("#showsort").val("original"),a("#showsortdirection").val("asc");var b=[a("#container")];a.each(b,function(){a(this).isotope({itemSelector:".trakt_show",sortBy:"original-order",layoutMode:"fitRows",getSortData:{name:function(b){var d=a(b).attr("data-name")||"";return(c.metaToBool("sickrage.SORT_ARTICLE")?d:d.replace(/^(The|A|An)\s/i,"")).toLowerCase()},rating:"[data-rating] parseInt",votes:"[data-votes] parseInt"}})}),a("#showsort").on("change",function(){var b;switch(a(this).value){case"original":b="original-order";break;case"rating":a("#container").isotope({sortBy:"random"}),b="rating";break;case"rating_votes":b=["rating","votes"];break;case"votes":b="votes";break;default:b="name"}a("#container").isotope({sortBy:b})}),a("#showsortdirection").on("change",function(){a("#container").isotope({sortAscending:"asc"===a(this).value})}),a("#traktlist").on("change",function(a){var b=c.updateUrlParameter(document.location.href,"list",a.target.value);document.location.href=b}),a("#limit").on("change",function(a){var b=c.updateUrlParameter(document.location.href,"limit",a.target.value);document.location.href=b}),a("img.trakt-image").each(function(){!0!==a(this).data("image-loaded")&&a.ajax({url:c.srWebRoot+"/addShows/getIndexerImage",type:"GET",data:{indexerid:a(this).data("indexerid")},context:this,success:function(b){a(this).data("image-loaded",!0),a(this).attr("src",b)}})})}},popular_shows:function(){c.home.add_existing_shows.showGrid()},test_renaming:function(){a(".seriesCheck").on("click",function(){var b=this;a(".seasonCheck:visible").each(function(){a(this).prop("checked",b.checked)}),a(".epCheck:visible").each(function(){a(this).prop("checked",b.checked)})}),a(".seasonCheck").click(function(){var b=this,c=a(b).attr("id");a(".epCheck:visible").each(function(){a(this).attr("id").split("x")[0]===c&&a(this).prop("checked",b.checked)})}),a("input[type=submit]").on("click",function(){var b=[];if(a(".epCheck").each(function(){a(this).prop("checked")&&b.push(a(this).attr("id"))}),0===b.length)return!1;window.location.href=c.srWebRoot+"/home/doRename?show="+a("#showID").attr("value")+"&eps="+b.join("|")})},restart:function(){function b(){d=0,a.ajax({url:c.srWebRoot+"/home/is_alive/",dataType:"jsonp",jsonp:"srcallback",success:function(d){"nope"===d.msg?(a("#shut_down_loading").hide(),a("#shut_down_success").show(),a("#restart_message").show(),setTimeout(b,1e3)):""===e||d.msg===e?(e=d.msg,setTimeout(b,1e3)):(a("#restart_loading").hide(),a("#restart_success").show(),a("#restart_message").show(),window.location=c.srWebRoot+"/"+c.srDefaultPage+"/")},error:function(c){if(f+=1,a("#shut_down_loading").hide(),a("#shut_down_success").show(),a("#restart_message").show(),f>90)return a("#restart_loading").hide(),a("#restart_failure").show(),void a("#restart_fail_message").show();0===d&&(d=setTimeout(b,1e3))}})}var d,e="",f=0;b()},new_show:{init:function(){a("#addShowForm").steps({bodyTag:"section",transitionEffect:"fade",stepsOrientation:"vertical",onStepChanging:function(b,d,e){var f;return d>e||(c.home.add_show_options(),c.root_dirs.init(),c.quality_chooser.init(),f=a("input:radio[name=whichSeries]:checked").length?a("input:radio[name=whichSeries]:checked").val().split("|")[4]:a("input:hidden[name=whichSeries]").length&&a("input:hidden[name=whichSeries]").val().length?a("#providedName").val():"",f.length?(c.home.update_bwlist(f),!0):void 0)},onFinished:function(b,d){c.home.generate_bwlist(),a(this).submit()}}),a("input:hidden[name=whichSeries]").length&&a("#fullShowPath").length&&a("#addShowForm").steps("getStep","1"),a("#searchName").on("click",function(){a("#searchName").prop("disabled",!0),c.home.new_show.searchIndexers(),a("#searchName").prop("disabled",!1)}),a("#skipShowButton").on("click",function(){a("#skipShow").val("1"),a("#addShowForm").submit()}),a("#nameToSearch").focus(),a("#indexerLang").bfhlanguages({language:c.getMeta("sickrage.DEFAULT_LANGUAGE"),available:c.getMeta("sickrage.LANGUAGES")}),a("#nameToSearch").length&&a("#nameToSearch").val().length&&a("#searchName").click(),a("#nameToSearch").keyup(function(b){13===b.keyCode&&a("#searchName").click()})},searchIndexers:function(){if(a("#nameToSearch").val().length){var d="<b>"+a("#nameToSearch").val().trim()+"</b> on "+a("#providedIndexer option:selected").text()+"<br/>";a("#messages").empty().html('<img id="searchingAnim" src="'+c.srWebRoot+"/images/loading32"+c.themeSpinner+'.gif" height="24" width="24" /> searching for '+d),a.ajax({url:c.srWebRoot+"/home/addShows/searchIndexersForShowName",data:{search_term:a("#nameToSearch").val().trim(),lang:a("#indexerLang").val(),indexer:a("#providedIndexer").val()},timeout:1e3*parseInt(a("#indexer_timeout").val(),10),dataType:"json",error:function(){a("#messages").empty().html(b("search timed out, try increasing timeout for indexer"))},success:function(d){var e=!0,f=b('<legend class="legend">Search Results:</legend>\n'),g="";0===d.results.length?f+=b("<b>No results found, try a different search or language.</b>"):(a.each(d.results,function(a,h){e?(g=" checked",e=!1):g="";var i=h.join("|");if(f+='<input type="radio" class="pull-left" id="whichSeries" name="whichSeries" value="'+i.replace(/"/g,"")+'"'+g+" /> ",f+='<a href="'+c.anonURL+h[2]+h[3]+"&lid="+d.langid+'" onclick="window.open(this.href, \'_blank\'); return false;" ><b>'+h[4]+"</b></a>",null!==h[5]){var j=new Date(h[5]),k=new Date;f+=b(j>k?" (will debut on "+h[5]+")":" (started on "+h[5]+")")}null!==h[0]&&(f+=" ["+h[0]+"]"),f+="<br/>"}),f+="</ul>"),f+="<br/>",a("#messages").html(f)}})}}},add_show_options:function(){a("#saveDefaultsButton").on("click",function(){var d=[],e=[];a("#anyQualities option:selected").each(function(b,c){d.push(a(c).val())}),a("#bestQualities option:selected").each(function(b,c){e.push(a(c).val())}),a.get(c.srWebRoot+"/config/general/saveAddShowDefaults",{defaultStatus:a("#statusSelect").val(),anyQualities:d.join(","),bestQualities:e.join(","),defaultFlattenFolders:a("#flatten_folders").prop("checked"),subtitles:a("#subtitles").prop("checked"),anime:a("#anime").prop("checked"),scene:a("#scene").prop("checked"),defaultStatusAfter:a("#statusSelectAfter").val(),archive:a("#archive").prop("checked")}),a(this).attr("disabled",!0),new PNotify({title:b("Saved Defaults"),text:b('Your "add show" defaults have been set to your current selections.'),shadow:!1})}),a("#statusSelect, #qualityPreset, #flatten_folders, #anyQualities, #bestQualities, #subtitles, #scene, #anime, #statusSelectAfter, #archive").change(function(){a("#saveDefaultsButton").attr("disabled",!1)})},generate_bwlist:function(){var b=[];a("#white option").each(function(c,d){b[c]=a(d).val()}),a("#whitelist").val(b.join(",")),b=[],a("#black option").each(function(c,d){b[c]=a(d).val()}),a("#blacklist").val(b.join(","))},update_bwlist:function(b){a("#white").children().remove(),a("#black").children().remove(),a("#pool").children().remove(),a("#anime").prop("checked")?(a("#blackwhitelist").show(),b&&a.getJSON(c.srWebRoot+"/home/fetch_releasegroups",{show_name:b},function(b){"success"===b.result&&a.each(b.groups,function(b,c){var d=a("<option>");d.attr("value",c.name),d.html(c.name+" | "+c.rating+" | "+c.range),d.appendTo("#pool")})})):a("#blackwhitelist").hide()}},config:{init:function(){a("#configForm").ajaxForm({beforeSubmit:function(){a(".config_submitter .config_submitter_refresh").each(function(){a(this).attr("disabled","disabled"),a(this).after(b("<span>"+c.loadingHTML+" Saving...</span>")),a(this).hide()})},success:function(){setTimeout(function(){"use strict";a(".config_submitter").each(function(){a(this).removeAttr("disabled"),a.next().remove(),a(this).show()}),a(".config_submitter_refresh").each(function(){a(this).removeAttr("disabled"),a.next().remove(),a(this).show(),window.location.reload()}),a("#email_show").trigger("notify")},2e3)}}),a("#config-tabs a").click(function(b){b.preventDefault(),a(this).tab("show")}),a("ul.nav-tabs > li > a").on("shown.bs.tab",function(b){var c=a(b.target).attr("href").substr(1);window.location.hash=c});var d=window.location.hash;a('#config-tabs a[href="'+d+'"]').tab("show"),a("a.resetConfig").confirm({title:b("Reset Config to Defaults"),content:b("Are you sure you want to reset config to defaults?")})},general:function(){0===a("input[name='proxy_setting']").val().length&&(a("input[id='proxy_indexers']").prop("checked",!1),a("label[for='proxy_indexers']").hide()),a("input[name='proxy_setting']").on("input",function(){0===a(this).val().length?(a("input[id='proxy_indexers']").prop("checked",!1),a("label[for='proxy_indexers']").hide()):a("label[for='proxy_indexers']").show()}),a(".viewIf").on("click",function(){a(this).prop("checked")?(a(".hide_if_"+a(this).attr("id")).css("display","none"),a(".show_if_"+a(this).attr("id")).fadeIn("fast","linear")):(a(".show_if_"+a(this).attr("id")).css("display","none"),a(".hide_if_"+a(this).attr("id")).fadeIn("fast","linear"))}),a(".datePresets").on("click",function(){var b=a("#date_presets").val();a(this).prop("checked")&&"%x"===b?(b="%a, %b %d, %Y",a("#date_use_system_default").html("1")):a(this).prop("checked")||"1"!==a("#date_use_system_default").html()||(b="%x"),a("#date_presets").attr("name","date_preset_old"),a("#date_presets").attr("id","date_presets_old"),a("#date_presets_na").attr("name","date_preset"),a("#date_presets_na").attr("id","date_presets"),a("#date_presets_old").attr("name","date_preset_na"),a("#date_presets_old").attr("id","date_presets_na"),b&&a("#date_presets").val(b)}),a("#api_key").on("click",function(){a("#api_key").select()}),a("#generate_new_apikey").on("click",function(){a.get(c.srWebRoot+"/config/general/generateApiKey",function(b){if(void 0!==b.error)return void alert(b.error);a("#api_key").val(b)})}),a("#testAPI").click(function(){a("#testAPI-result").html(c.loadingHTML);var b=a.trim(a("#api_client_id").val()),d=a.trim(a("#api_client_secret").val());a.get(c.srWebRoot+"/home/testAPI",{client_id:b,client_secret:d},function(b){a("#testAPI-result").html(b)})}),a("#pip_path").fileBrowser({title:b("Select path to pip"),key:"pip_path",includeFiles:1}),a("#git_path").fileBrowser({title:b("Select path to git"),key:"git_path",includeFiles:1}),a("#verifyPipPath").click(function(){var d=a.trim(a("#pip_path").val());if(!d)return a("#testPIP-result").html(b("Please fill out the necessary fields above.")),void a("#pip_path").addClass("warning");a("#pip_path").removeClass("warning"),a(this).prop("disabled",!0),a("#testPIP-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/verifyPath",{path:d}).done(function(b){a("#testPIP-result").html(b),a("#verifyPipPath").prop("disabled",!1)})}),a("#verifyGitPath").click(function(){var d=a.trim(a("#git_path").val());if(!d)return a("#testGIT-result").html(b("Please fill out the necessary fields above.")),void a("#git_path").addClass("warning");a("#git_path").removeClass("warning"),a(this).prop("disabled",!0),a("#testGIT-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/verifyPath",{path:d}).done(function(b){a("#testGIT-result").html(b),a("#verifyGitPath").prop("disabled",!1)})}),a("#installRequirements").on("click",function(){window.location.href=c.srWebRoot+"/home/installRequirements"}),a("#branchCheckout").on("click",function(){window.location.href=c.srWebRoot+"/home/branchCheckout?branch="+a("#branchVersion").val()}),a("#google_link").on("click",function(){null===localStorage.getItem("google_token_type")||null===localStorage.getItem("google_access_token")?c.google.login():c.google.logout()}),null===localStorage.getItem("google_token_type")||null===localStorage.getItem("google_access_token")?a("#google_link").prop("value",b("Link")):a("#google_link").prop("value",b("Unlink"))},subtitles:{init:function(){var d=new Bloodhound({remote:{url:c.srWebRoot+"/config/subtitles/get_code?q=%QUERY",wildcard:"%QUERY",filter:function(b){var c=a("#subtitles_languages").tokenfield("getTokens");return a.map(b,function(a){for(var b=!1,d=0;d<c.length;d++)a.value===c[d].value&&(b=!0);if(!b)return{value:a.value,name:a.name}})}},datumTokenizer:Bloodhound.tokenizers.whitespace("name"),queryTokenizer:Bloodhound.tokenizers.whitespace});a("#subtitles_languages").tokenfield({typeahead:{name:"subtitles_languages",source:d,display:"name",displayKey:"name"}}),a("#subtitles_dir").fileBrowser({title:b("Select Subtitles Download Directory")}),a("#editAService").change(function(){c.config.subtitles.showHideServices()}),a(".service_enabler").on("click",function(){c.config.subtitles.refreshServiceList()}),c.config.subtitles.showHideServices(),a("#service_order_list").sortable({placeholder:"ui-state-highlight",update:function(){c.config.subtitles.refreshServiceList()}}),a("#service_order_list").disableSelection()},showHideServices:function(){a(".serviceDiv").each(function(){var b=a(this).attr("id");a("#editAService :selected").val()+"Div"===b?a(this).show():a(this).hide()})},addService:function(b,d,e,f,g,h){if(null===e.match("/$")&&(e+="/"),0===a("#service_order_list > #"+b).length&&!1!==h){var i='<li class="ui-state-default" id="'+b+'"> <input type="checkbox" id="enable_'+b+'" class="service_enabler" CHECKED> <a href="'+c.anonURL+e+'" class="imgLink" target="_new"><img src="'+c.srWebRoot+'/images/providers/newznab.gif" alt="'+d+'" width="16" height="16"></a> '+d+"</li>";a("#service_order_list").append(i),a("#service_order_list").sortable("refresh")}},deleteService:function(b){a("#service_order_list > #"+b).remove()},refreshServiceList:function(){var b=a("#service_order_list").sortable("toArray"),c=[];a.each(b,function(b,d){var e=+a("#enable_"+d).prop("checked")?"1":"0";c.push(d+":"+e)}),a("#service_order").val(c.join(" "))}},search:{init:function(){a("#nzb_method").change(c.config.search.nzbMethodHandler),a("#torrent_method").change(c.config.search.torrentMethodHandler),c.config.search.nzbMethodHandler(),c.config.search.torrentMethodHandler(),a("#testSABnzbd").click(function(){a("#testSABnzbd_result").html(c.loadingHTML);var b=a("#sab_host").val(),d=a("#sab_username").val(),e=a("#sab_password").val(),f=a("#sab_apikey").val();a.get(c.srWebRoot+"/home/testSABnzbd",{host:b,username:d,password:e,apikey:f},function(b){a("#testSABnzbd_result").html(b)})}),a("#use_torrents").click(function(){c.config.search.toggleTorrentTitle()}),a("#test_torrent").click(function(){a("#test_torrent_result").html(c.loadingHTML);var b=a("#torrent_method :selected").val(),d=a("#torrent_host").val(),e=a("#torrent_username").val(),f=a("#torrent_password").val();a.get(c.srWebRoot+"/home/testTorrent",{torrent_method:b,host:d,username:e,password:f},function(b){a("#test_torrent_result").html(b)})}),c.config.search.rtorrentScgi(),a("#torrent_host").change(c.config.search.rtorrentScgi),a("#nzb_dir").fileBrowser({title:b("Select .nzb blackhole/watch location")}),a("#torrent_dir").fileBrowser({title:b("Select .torrent blackhole/watch location")}),a("#torrent_path").fileBrowser({title:b("Select .torrent download location")})},toggleTorrentTitle:function(){a("#use_torrents").prop("checked")?a("#no_torrents").show():a("#no_torrents").hide()},nzbMethodHandler:function(){a("#blackhole_settings").hide(),a("#sabnzbd_settings").hide(),a("#testSABnzbd").hide(),a("#testSABnzbd_result").hide(),a("#nzbget_settings").hide(),"blackhole"===a("#nzb_method").val().toLowerCase()?a("#blackhole_settings").show():"nzbget"===a("#nzb_method").val().toLowerCase()?a("#nzbget_settings").show():(a("#sabnzbd_settings").show(),a("#testSABnzbd").show(),a("#testSABnzbd_result").show())},torrentMethodHandler:function(){a("#options_torrent_clients").hide(),a("#options_torrent_blackhole").hide();var c=a("#torrent_method").val(),d="",e="#options_torrent_blackhole";a("#torrent_method_icon").removeClass(function(a,b){return(b.match(/(^|\s)add-client-icon-\S+/g)||[]).join(" ")}),a("#torrent_method_icon").addClass("add-client-icon-"+c.replace("_","-")),"blackhole"!==c.toLowerCase()&&(a("#label_warning_deluge").hide(),a("#label_anime_warning_deluge").hide(),a("#host_desc_torrent").show(),a("#torrent_verify_cert_option").hide(),a("#torrent_verify_deluge").hide(),a("#torrent_verify_rtorrent").hide(),a("#torrent_auth_type_option").hide(),a("#torrent_path_option").show(),a("#torrent_path_option").find(".fileBrowser").show(),a("#torrent_seed_time_option").hide(),a("#torrent_high_bandwidth_option").hide(),a("#torrent_label_option").show(),a("#torrent_label_anime_option").show(),a("#path_synology").hide(),a("#torrent_paused_option").show(),a("#torrent_rpcurl_option").hide(),"utorrent"===c.toLowerCase()?(d="uTorrent",a("#torrent_path_option").hide(),a("#torrent_seed_time_label").text(b("Minimum seeding time is")),a("#torrent_seed_time_option").show(),a("#host_desc_torrent").text(b("URL to your uTorrent client (e.g. http://localhost:8000)"))):"transmission"===c.toLowerCase()?(d="Transmission",a("#torrent_seed_time_label").text(b("Stop seeding when inactive for")),a("#torrent_seed_time_option").show(),a("#torrent_high_bandwidth_option").show(),a("#torrent_label_option").hide(),a("#torrent_label_anime_option").hide(),a("#torrent_rpcurl_option").show(),a("#host_desc_torrent").text(b("URL to your Transmission client (e.g. http://localhost:9091)"))):"deluge"===c.toLowerCase()?(d="Deluge",a("#torrent_verify_cert_option").show(),a("#torrent_verify_deluge").show(),a("#torrent_verify_rtorrent").hide(),a("#label_warning_deluge").show(),a("#label_anime_warning_deluge").show(),a("#torrent_username_option").hide(),a("#torrent_username").prop("value",""),a("#host_desc_torrent").text(b("URL to your Deluge client (e.g. http://localhost:8112)"))):"deluged"===c.toLowerCase()?(d="Deluge",a("#torrent_verify_cert_option").hide(),a("#torrent_verify_deluge").hide(),a("#torrent_verify_rtorrent").hide(),a("#label_warning_deluge").show(),a("#label_anime_warning_deluge").show(),a("#torrent_username_option").show(),a("#host_desc_torrent").text(b("IP or Hostname of your Deluge Daemon (e.g. scgi://localhost:58846)"))):"download_station"===c.toLowerCase()?(d="Synology DS",a("#torrent_label_option").hide(),a("#torrent_label_anime_option").hide(),a("#torrent_paused_option").hide(),a("#torrent_path_option").find(".fileBrowser").hide(),a("#host_desc_torrent").text(b("URL to your Synology DS client (e.g. http://localhost:5000)")),a("#path_synology").show()):"rtorrent"===c.toLowerCase()?(d="rTorrent",a("#torrent_paused_option").hide(),a("#host_desc_torrent").html(b("URL to your rTorrent client (e.g. scgi://localhost:5000 <br> or https://localhost/rutorrent/plugins/httprpc/action.php)")),a("#torrent_verify_cert_option").show(),a("#torrent_verify_deluge").hide(),a("#torrent_verify_rtorrent").show(),a("#torrent_auth_type_option").show()):"qbittorrent"===c.toLowerCase()?(d="qbittorrent",a("#torrent_path_option").hide(),a("#label_warning_qbittorrent").show(),a("#label_anime_warning_qbittorrent").show(),a("#host_desc_torrent").text(b("URL to your qbittorrent client (e.g. http://localhost:8080)"))):"mlnet"===c.toLowerCase()?(d="mlnet",a("#torrent_path_option").hide(),a("#torrent_label_option").hide(),a("#torrent_verify_cert_option").hide(),a("#torrent_verify_deluge").hide(),a("#torrent_verify_rtorrent").hide(),a("#torrent_label_anime_option").hide(),a("#torrent_paused_option").hide(),a("#host_desc_torrent").text(b("URL to your MLDonkey (e.g. http://localhost:4080)"))):"putio"===c.toLowerCase()&&(d="putio",a("#torrent_path_option").hide(),a("#torrent_label_option").hide(),a("#torrent_verify_cert_option").hide(),a("#torrent_verify_deluge").hide(),a("#torrent_verify_rtorrent").hide(),a("#torrent_label_anime_option").hide(),a("#torrent_paused_option").hide(),a("#torrent_host_option").hide(),a("#host_desc_torrent").text(b("URL to your putio client (e.g. http://localhost:8080)"))),a("#host_title").text(d+" host:port"),a("#username_title").text(d+" username"),a("#password_title").text(d+" password"),a("#torrent_client").text(d),a("#rpcurl_title").text(d+" RPC URL"),e="#options_torrent_clients"),a(e).show()},rtorrentScgi:function(){if("rtorrent"===a("#torrent_method :selected").val().toLowerCase()){"scgi://"===a("#torrent_host").val().substr(0,7)?(a("#torrent_username_option").hide(),a("#torrent_username").prop("value",""),a("#torrent_password_option").hide(),a("#torrent_password").prop("value",""),a("#torrent_auth_type_option").hide(),a("#torrent_auth_type option[value=none]").attr("selected","selected")):(a("#torrent_username_option").show(),a("#torrent_password_option").show(),a("#torrent_auth_type_option").show())}}},postprocessing:{init:function(){a("#unpack").on("change",function(){a(this).prop("checked")?c.config.postprocessing.israr_supported():a("#unpack").qtip("toggle",!1)}),a("#name_presets").on("change",function(){c.config.postprocessing.setup_naming()}),a("#name_abd_presets").on("change",function(){c.config.postprocessing.setup_abd_naming()}),a("#naming_custom_abd").on("change",function(){c.config.postprocessing.setup_abd_naming()}),a("#name_sports_presets").on("change",function(){c.config.postprocessing.setup_sports_naming()}),a("#naming_custom_sports").on("change",function(){c.config.postprocessing.setup_sports_naming()}),a("#name_anime_presets").on("change",function(){c.config.postprocessing.setup_anime_naming()}),a("#naming_custom_anime").on("change",function(){c.config.postprocessing.setup_anime_naming()}),a('input[name="naming_anime"]').on("click",function(){c.config.postprocessing.setup_anime_naming()}),a("#naming_multi_ep").change(c.config.postprocessing.fill_examples),a("#naming_pattern").focusout(c.config.postprocessing.fill_examples),a("#naming_pattern").keyup(function(){c.config.postprocessing.typewatch(function(){c.config.postprocessing.fill_examples()},500)}),a("#naming_anime_multi_ep").change(c.config.postprocessing.fill_anime_examples),a("#naming_anime_pattern").focusout(c.config.postprocessing.fill_anime_examples),a("#naming_anime_pattern").keyup(function(){c.config.postprocessing.typewatch(function(){c.config.postprocessing.fill_anime_examples()},500)}),a("#naming_abd_pattern").focusout(c.config.postprocessing.fill_examples),a("#naming_abd_pattern").keyup(function(){c.config.postprocessing.typewatch(function(){c.config.postprocessing.fill_abd_examples()},500)}),a("#naming_sports_pattern").focusout(c.config.postprocessing.fill_examples),a("#naming_sports_pattern").keyup(function(){c.config.postprocessing.typewatch(function(){c.config.postprocessing.fill_sports_examples()},500)}),a("#naming_anime_pattern").focusout(c.config.postprocessing.fill_examples),a("#naming_anime_pattern").keyup(function(){c.config.postprocessing.typewatch(function(){
c.config.postprocessing.fill_anime_examples()},500)}),a("#show_naming_key").on("click",function(){a("#naming_key").toggle()}),a("#show_naming_abd_key").on("click",function(){a("#naming_abd_key").toggle()}),a("#show_naming_sports_key").on("click",function(){a("#naming_sports_key").toggle()}),a("#show_naming_anime_key").on("click",function(){a("#naming_anime_key").toggle()}),a("#do_custom").on("click",function(){a("#naming_pattern").val(a("#name_presets :selected").attr("id")),a("#naming_custom").show(),a("#naming_pattern").focus()}),c.config.postprocessing.setup_naming(),c.config.postprocessing.setup_abd_naming(),c.config.postprocessing.setup_sports_naming(),c.config.postprocessing.setup_anime_naming(),a("#metadataType").on("change keyup",function(){c.config.postprocessing.showHideMetadata()}),c.config.postprocessing.showHideMetadata(),a(".metadata_checkbox").on("click",function(){c.config.postprocessing.refreshMetadataConfig(!1)}),c.config.postprocessing.refreshMetadataConfig(!0),a("img[title]").qtip({position:{viewport:a(window),at:"bottom center",my:"top right"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-shadow qtip-dark"}}),a("i[title]").qtip({position:{viewport:a(window),at:"top center",my:"bottom center"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow ui-tooltip-sb"}}),a(".custom-pattern,#unpack").qtip({content:"validating...",show:{event:!1,ready:!1},hide:!1,position:{viewport:a(window),at:"center left",my:"center right"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow qtip-red"}}),a("#tv_download_dir").fileBrowser({title:b("Select TV Download Directory")})},typewatch:function(){var a=0;return function(b,c){clearTimeout(a),a=setTimeout(b,c)}},israr_supported:function(){a.get(c.srWebRoot+"/config/postProcessing/isRarSupported",function(c){"supported"!==c&&(a("#unpack").qtip("option",{"content.text":b("Unrar Executable not found."),"style.classes":"qtip-rounded qtip-shadow qtip-red"}),a("#unpack").qtip("toggle",!0),a("#unpack").css("background-color","#FFFFDD"))})},fill_examples:function(){var d=a("#naming_pattern").val(),e=a("#naming_multi_ep :selected").val(),f=a('input[name="naming_anime"]:checked').val();a.get(c.srWebRoot+"/config/postProcessing/testNaming",{pattern:d,anime_type:3},function(b){b?(a("#naming_example").text(b+".ext"),a("#naming_example_div").show()):a("#naming_example_div").hide()}),a.get(c.srWebRoot+"/config/postProcessing/testNaming",{pattern:d,multi:e,anime_type:3},function(b){b?(a("#naming_example_multi").text(b+".ext"),a("#naming_example_multi_div").show()):a("#naming_example_multi_div").hide()}),a.get(c.srWebRoot+"/config/postProcessing/isNamingValid",{pattern:d,multi:e,anime_type:f},function(c){"invalid"===c?(a("#naming_pattern").qtip("option",{"content.text":b("This pattern is invalid."),"style.classes":"qtip-rounded qtip-shadow qtip-red"}),a("#naming_pattern").qtip("toggle",!0),a("#naming_pattern").css("background-color","#FFDDDD")):"seasonfolders"===c?(a("#naming_pattern").qtip("option",{"content.text":b('This pattern would be invalid without the folders, using it will force "Flatten" off for all shows.'),"style.classes":"qtip-rounded qtip-shadow qtip-red"}),a("#naming_pattern").qtip("toggle",!0),a("#naming_pattern").css("background-color","#FFFFDD")):(a("#naming_pattern").qtip("option",{"content.text":b("This pattern is valid."),"style.classes":"qtip-rounded qtip-shadow qtip-green"}),a("#naming_pattern").qtip("toggle",!1),a("#naming_pattern").css("background-color","#FFFFFF"))})},fill_abd_examples:function(){var d=a("#naming_abd_pattern").val();a.get(c.srWebRoot+"/config/postProcessing/testNaming",{pattern:d,abd:"True"},function(b){b?(a("#naming_abd_example").text(b+".ext"),a("#naming_abd_example_div").show()):a("#naming_abd_example_div").hide()}),a.get(c.srWebRoot+"/config/postProcessing/isNamingValid",{pattern:d,abd:"True"},function(c){"invalid"===c?(a("#naming_abd_pattern").qtip("option",{"content.text":b("This pattern is invalid."),"style.classes":"qtip-rounded qtip-shadow qtip-red"}),a("#naming_abd_pattern").qtip("toggle",!0),a("#naming_abd_pattern").css("background-color","#FFDDDD")):"seasonfolders"===c?(a("#naming_abd_pattern").qtip("option",{"content.text":b('This pattern would be invalid without the folders, using it will force "Flatten" off for all shows.'),"style.classes":"qtip-rounded qtip-shadow qtip-red"}),a("#naming_abd_pattern").qtip("toggle",!0),a("#naming_abd_pattern").css("background-color","#FFFFDD")):(a("#naming_abd_pattern").qtip("option",{"content.text":b("This pattern is valid."),"style.classes":"qtip-rounded qtip-shadow qtip-green"}),a("#naming_abd_pattern").qtip("toggle",!1),a("#naming_abd_pattern").css("background-color","#FFFFFF"))})},fill_sports_examples:function(){var d=a("#naming_sports_pattern").val();a.get(c.srWebRoot+"/config/postProcessing/testNaming",{pattern:d,sports:"True"},function(b){b?(a("#naming_sports_example").text(b+".ext"),a("#naming_sports_example_div").show()):a("#naming_sports_example_div").hide()}),a.get(c.srWebRoot+"/config/postProcessing/isNamingValid",{pattern:d,sports:"True"},function(c){"invalid"===c?(a("#naming_sports_pattern").qtip("option",{"content.text":b("This pattern is invalid."),"style.classes":"qtip-rounded qtip-shadow qtip-red"}),a("#naming_sports_pattern").qtip("toggle",!0),a("#naming_sports_pattern").css("background-color","#FFDDDD")):"seasonfolders"===c?(a("#naming_sports_pattern").qtip("option",{"content.text":b('This pattern would be invalid without the folders, using it will force "Flatten" off for all shows.'),"style.classes":"qtip-rounded qtip-shadow qtip-red"}),a("#naming_sports_pattern").qtip("toggle",!0),a("#naming_sports_pattern").css("background-color","#FFFFDD")):(a("#naming_sports_pattern").qtip("option",{"content.text":b("This pattern is valid."),"style.classes":"qtip-rounded qtip-shadow qtip-green"}),a("#naming_sports_pattern").qtip("toggle",!1),a("#naming_sports_pattern").css("background-color","#FFFFFF"))})},fill_anime_examples:function(){var d=a("#naming_anime_pattern").val(),e=a("#naming_anime_multi_ep :selected").val(),f=a('input[name="naming_anime"]:checked').val();a.get(c.srWebRoot+"/config/postProcessing/testNaming",{pattern:d,anime_type:f},function(b){b?(a("#naming_example_anime").text(b+".ext"),a("#naming_example_anime_div").show()):a("#naming_example_anime_div").hide()}),a.get(c.srWebRoot+"/config/postProcessing/testNaming",{pattern:d,multi:e,anime_type:f},function(b){b?(a("#naming_example_multi_anime").text(b+".ext"),a("#naming_example_multi_anime_div").show()):a("#naming_example_multi_anime_div").hide()}),a.get(c.srWebRoot+"/config/postProcessing/isNamingValid",{pattern:d,multi:e,anime_type:f},function(c){"invalid"===c?(a("#naming_pattern").qtip("option",{"content.text":b("This pattern is invalid."),"style.classes":"qtip-rounded qtip-shadow qtip-red"}),a("#naming_pattern").qtip("toggle",!0),a("#naming_pattern").css("background-color","#FFDDDD")):"seasonfolders"===c?(a("#naming_pattern").qtip("option",{"content.text":b('This pattern would be invalid without the folders, using it will force "Flatten" off for all shows.'),"style.classes":"qtip-rounded qtip-shadow qtip-red"}),a("#naming_pattern").qtip("toggle",!0),a("#naming_pattern").css("background-color","#FFFFDD")):(a("#naming_pattern").qtip("option",{"content.text":b("This pattern is valid."),"style.classes":"qtip-rounded qtip-shadow qtip-green"}),a("#naming_pattern").qtip("toggle",!1),a("#naming_pattern").css("background-color","#FFFFFF"))})},setup_naming:function(){"Custom..."===a("#name_presets :selected").val()?a("#naming_custom").show():(a("#naming_custom").hide(),a("#naming_pattern").val(a("#name_presets :selected").attr("id"))),c.config.postprocessing.fill_examples()},setup_abd_naming:function(){"Custom..."===a("#name_abd_presets :selected").val()?a("#naming_abd_custom").show():(a("#naming_abd_custom").hide(),a("#naming_abd_pattern").val(a("#name_abd_presets :selected").attr("id"))),c.config.postprocessing.fill_abd_examples()},setup_sports_naming:function(){"Custom..."===a("#name_sports_presets :selected").val()?a("#naming_sports_custom").show():(a("#naming_sports_custom").hide(),a("#naming_sports_pattern").val(a("#name_sports_presets :selected").attr("id"))),c.config.postprocessing.fill_sports_examples()},setup_anime_naming:function(){"Custom..."===a("#name_anime_presets :selected").val()?a("#naming_anime_custom").show():(a("#naming_anime_custom").hide(),a("#naming_anime_pattern").val(a("#name_anime_presets :selected").attr("id"))),c.config.postprocessing.fill_anime_examples()},showHideMetadata:function(){a(".metadataDiv").each(function(){var b=a(this).attr("id");a("#metadataType :selected").val()===b?a(this).show():a(this).hide()})},refreshMetadataConfig:function(b){var d=0,e="";a(".metadataDiv").each(function(){var b=a(this).attr("id"),c=[],f=a("#"+b+"_show_metadata").prop("checked"),g=a("#"+b+"_episode_metadata").prop("checked"),h=a("#"+b+"_fanart").prop("checked"),i=a("#"+b+"_poster").prop("checked"),j=a("#"+b+"_banner").prop("checked"),k=a("#"+b+"_episode_thumbnails").prop("checked"),l=a("#"+b+"_season_posters").prop("checked"),m=a("#"+b+"_season_banners").prop("checked"),n=a("#"+b+"_season_all_poster").prop("checked"),o=a("#"+b+"_season_all_banner").prop("checked"),p=a("#"+b+"_enabled").prop("checked");c.push(f?"1":"0"),c.push(g?"1":"0"),c.push(h?"1":"0"),c.push(i?"1":"0"),c.push(j?"1":"0"),c.push(k?"1":"0"),c.push(l?"1":"0"),c.push(m?"1":"0"),c.push(n?"1":"0"),c.push(o?"1":"0"),c.push(p?"1":"0");for(var q=0,r=0;r<c.length;r++)q+=parseInt(c[r]);q>d&&(d=q,e=b),a("#"+b+"_eg_show_metadata").attr("class",f?"enabled":"disabled"),a("#"+b+"_eg_episode_metadata").attr("class",g?"enabled":"disabled"),a("#"+b+"_eg_fanart").attr("class",h?"enabled":"disabled"),a("#"+b+"_eg_poster").attr("class",i?"enabled":"disabled"),a("#"+b+"_eg_banner").attr("class",j?"enabled":"disabled"),a("#"+b+"_eg_episode_thumbnails").attr("class",k?"enabled":"disabled"),a("#"+b+"_eg_season_posters").attr("class",l?"enabled":"disabled"),a("#"+b+"_eg_season_banners").attr("class",m?"enabled":"disabled"),a("#"+b+"_eg_season_all_poster").attr("class",n?"enabled":"disabled"),a("#"+b+"_eg_season_all_banner").attr("class",o?"enabled":"disabled"),a("#"+b+"_data").val(c.join("|"))}),""!==e&&b&&(a("#metadataType option[value="+e+"]").attr("selected","selected"),c.config.postprocessing.showHideMetadata())}},notifications:{init:function(){a("#testGrowl").click(function(){var d=a.trim(a("#growl_host").val()),e=a.trim(a("#growl_password").val());if(!d)return a("#testGrowl-result").html(b("Please fill out the necessary fields above.")),void a("#growl_host").addClass("warning");a("#growl_host").removeClass("warning"),a(this).prop("disabled",!0),a("#testGrowl-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/testGrowl",{host:d,password:e}).done(function(b){a("#testGrowl-result").html(b),a("#testGrowl").prop("disabled",!1)})}),a("#testProwl").click(function(){var d=a.trim(a("#prowl_api").val()),e=a("#prowl_priority").val();if(!d)return a("#testProwl-result").html(b("Please fill out the necessary fields above.")),void a("#prowl_api").addClass("warning");a("#prowl_api").removeClass("warning"),a(this).prop("disabled",!0),a("#testProwl-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/testProwl",{prowl_api:d,prowl_priority:e}).done(function(b){a("#testProwl-result").html(b),a("#testProwl").prop("disabled",!1)})}),a("#testKODI").click(function(){var d=a.trim(a("#kodi_host").val()),e=a.trim(a("#kodi_username").val()),f=a.trim(a("#kodi_password").val());if(!d)return a("#testKODI-result").html(b("Please fill out the necessary fields above.")),void a("#kodi_host").addClass("warning");a("#kodi_host").removeClass("warning"),a(this).prop("disabled",!0),a("#testKODI-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/testKODI",{host:d,username:e,password:f}).done(function(b){a("#testKODI-result").html(b),a("#testKODI").prop("disabled",!1)})}),a("#testPMC").click(function(){var d=a.trim(a("#plex_host").val()),e=a.trim(a("#plex_client_username").val()),f=a.trim(a("#plex_client_password").val());if(!d)return a("#testPMC-result").html(b("Please fill out the necessary fields above.")),void a("#plex_host").addClass("warning");a("#plex_host").removeClass("warning"),a(this).prop("disabled",!0),a("#testPMC-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/testPMC",{host:d,username:e,password:f}).done(function(b){a("#testPMC-result").html(b),a("#testPMC").prop("disabled",!1)})}),a("#testPMS").click(function(){var d=a.trim(a("#plex_server_host").val()),e=a.trim(a("#plex_username").val()),f=a.trim(a("#plex_password").val()),g=a.trim(a("#plex_server_token").val());if(!d)return a("#testPMS-result").html(b("Please fill out the necessary fields above.")),void a("#plex_server_host").addClass("warning");a("#plex_server_host").removeClass("warning"),a(this).prop("disabled",!0),a("#testPMS-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/testPMS",{host:d,username:e,password:f,plex_server_token:g}).done(function(b){a("#testPMS-result").html(b),a("#testPMS").prop("disabled",!1)})}),a("#testEMBY").click(function(){var d=a("#emby_host").val(),e=a("#emby_apikey").val();if(!d||!e)return a("#testEMBY-result").html(b("Please fill out the necessary fields above.")),d?a("#emby_host").removeClass("warning"):a("#emby_host").addClass("warning"),void(e?a("#emby_apikey").removeClass("warning"):a("#emby_apikey").addClass("warning"));a("#emby_host,#emby_apikey").removeClass("warning"),a(this).prop("disabled",!0),a("#testEMBY-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/testEMBY",{host:d,emby_apikey:e}).done(function(b){a("#testEMBY-result").html(b),a("#testEMBY").prop("disabled",!1)})}),a("#testBoxcar2").click(function(){var d=a.trim(a("#boxcar2_accesstoken").val());if(!d)return a("#testBoxcar2-result").html(b("Please fill out the necessary fields above.")),void a("#boxcar2_accesstoken").addClass("warning");a("#boxcar2_accesstoken").removeClass("warning"),a(this).prop("disabled",!0),a("#testBoxcar2-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/testBoxcar2",{accesstoken:d}).done(function(b){a("#testBoxcar2-result").html(b),a("#testBoxcar2").prop("disabled",!1)})}),a("#testPushover").click(function(){var d=a("#pushover_userkey").val(),e=a("#pushover_apikey").val();if(!d||!e)return a("#testPushover-result").html(b("Please fill out the necessary fields above.")),d?a("#pushover_userkey").removeClass("warning"):a("#pushover_userkey").addClass("warning"),void(e?a("#pushover_apikey").removeClass("warning"):a("#pushover_apikey").addClass("warning"));a("#pushover_userkey,#pushover_apikey").removeClass("warning"),a(this).prop("disabled",!0),a("#testPushover-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/testPushover",{userKey:d,apiKey:e}).done(function(b){a("#testPushover-result").html(b),a("#testPushover").prop("disabled",!1)})}),a("#testLibnotify").click(function(){a("#testLibnotify-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/testLibnotify",function(b){a("#testLibnotify-result").html(b)})}),a("#twitterStep1").click(function(){a("#testTwitter-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/twitterStep1",function(a){window.open(a)}).done(function(){a("#testTwitter-result").html(b("<b>Step1:</b> Confirm Authorization"))})}),a("#twitterStep2").click(function(){var d=a.trim(a("#twitter_key").val());if(!d)return a("#testTwitter-result").html(b("Please fill out the necessary fields above.")),void a("#twitter_key").addClass("warning");a("#twitter_key").removeClass("warning"),a("#testTwitter-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/twitterStep2",{key:d},function(b){a("#testTwitter-result").html(b)})}),a("#testTwitter").click(function(){a.get(c.srWebRoot+"/home/testTwitter",function(b){a("#testTwitter-result").html(b)})}),a("#testTwilio").on("click",function(){var b=a.trim(a("#twilio_account_sid").val()),d=a.trim(a("#twilio_phone_sid").val()),e=a.trim(a("#twilio_auth_token").val()),f=a.trim(a("#twilio_to_number").val());a(this).prop("disabled",!0),a("#testTwilio-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/testTwilio",{account_sid:b,phone_sid:d,auth_token:e,to_number:f}).done(function(b){a("#testTwilio-result").html(b),a("#testTwilio").prop("disabled",!1)})}),a("#testSlack").on("click",function(){a.get(c.srWebRoot+"/home/testSlack",function(b){a("#testSlack-result").html(b)})}),a("#testDiscord").on("click",function(){a.get(c.srWebRoot+"/home/testDiscord",function(b){a("#testDiscord-result").html(b)})}),a("#settingsNMJ").click(function(){if(!a("#nmj_host").val())return alert(b("Please fill in the Popcorn IP address")),void a("#nmj_host").focus();a("#testNMJ-result").html(c.loadingHTML);var d=a("#nmj_host").val();a.get(c.srWebRoot+"/home/settingsNMJ",{host:d},function(b){null===b&&(a("#nmj_database").removeAttr("readonly"),a("#nmj_mount").removeAttr("readonly"));var c=a.parseJSON(b);a("#testNMJ-result").html(c.message),a("#nmj_database").val(c.database),a("#nmj_mount").val(c.mount),c.database?a("#nmj_database").attr("readonly",!0):a("#nmj_database").removeAttr("readonly"),c.mount?a("#nmj_mount").attr("readonly",!0):a("#nmj_mount").removeAttr("readonly")})}),a("#testNMJ").click(function(){var d=a.trim(a("#nmj_host").val()),e=a("#nmj_database").val(),f=a("#nmj_mount").val();if(!d)return a("#testNMJ-result").html(b("Please fill out the necessary fields above.")),void a("#nmj_host").addClass("warning");a("#nmj_host").removeClass("warning"),a(this).prop("disabled",!0),a("#testNMJ-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/testNMJ",{host:d,database:e,mount:f}).done(function(b){a("#testNMJ-result").html(b),a("#testNMJ").prop("disabled",!1)})}),a("#settingsNMJv2").click(function(){if(!a("#nmjv2_host").val())return alert(b("Please fill in the Popcorn IP address")),void a("#nmjv2_host").focus();a("#testNMJv2-result").html(c.loadingHTML);for(var d,e=a("#nmjv2_host").val(),f=document.getElementsByName("nmjv2_dbloc"),g=0;g<f.length;g++)if(f[g].checked){d=f[g].value;break}var h=a("#NMJv2db_instance").val();a.get(c.srWebRoot+"/home/settingsNMJv2",{host:e,dbloc:d,instance:h},function(b){null===b&&a("#nmjv2_database").removeAttr("readonly");var c=a.parseJSON(b);a("#testNMJv2-result").html(c.message),a("#nmjv2_database").val(c.database),c.database?a("#nmjv2_database").attr("readonly",!0):a("#nmjv2_database").removeAttr("readonly")})}),a("#testNMJv2").click(function(){var d=a.trim(a("#nmjv2_host").val());if(!d)return a("#testNMJv2-result").html(b("Please fill out the necessary fields above.")),void a("#nmjv2_host").addClass("warning");a("#nmjv2_host").removeClass("warning"),a(this).prop("disabled",!0),a("#testNMJv2-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/testNMJv2",{host:d}).done(function(b){a("#testNMJv2-result").html(b),a("#testNMJv2").prop("disabled",!1)})}),a("#testFreeMobile").click(function(){var d=a.trim(a("#freemobile_id").val()),e=a.trim(a("#freemobile_apikey").val());if(!d||!e)return a("#testFreeMobile-result").html(b("Please fill out the necessary fields above.")),d?a("#freemobile_id").removeClass("warning"):a("#freemobile_id").addClass("warning"),void(e?a("#freemobile_apikey").removeClass("warning"):a("#freemobile_apikey").addClass("warning"));a("#freemobile_id,#freemobile_apikey").removeClass("warning"),a(this).prop("disabled",!0),a("#testFreeMobile-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/testFreeMobile",{freemobile_id:d,freemobile_apikey:e}).done(function(b){a("#testFreeMobile-result").html(b),a("#testFreeMobile").prop("disabled",!1)})}),a("#testTelegram").on("click",function(){var d={};if(d.id=a.trim(a("#telegram_id").val()),d.apikey=a.trim(a("#telegram_apikey").val()),!d.id||!d.apikey)return a("#testTelegram-result").html(b("Please fill out the necessary fields above.")),d.id?a("#telegram_id").removeClass("warning"):a("#telegram_id").addClass("warning"),void(d.apikey?a("#telegram_apikey").removeClass("warning"):a("#telegram_apikey").addClass("warning"));a("#telegram_id,#telegram_apikey").removeClass("warning"),a(this).prop("disabled",!0),a("#testTelegram-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/testTelegram",{telegram_id:d.id,telegram_apikey:d.apikey}).done(function(b){a("#testTelegram-result").html(b),a("#testTelegram").prop("disabled",!1)})}),a("#TraktGetPin").click(function(){window.open(a("#trakt_pin_url").val(),"popUp","toolbar=no, scrollbars=no, resizable=no, top=200, left=200, width=650, height=550"),a("#trakt_pin").removeClass("hide")}),a("#trakt_pin").on("keyup change",function(){0!==a("#trakt_pin").val().length?(a("#TraktGetPin").addClass("hide"),a("#authTrakt").removeClass("hide")):(a("#TraktGetPin").removeClass("hide"),a("#authTrakt").addClass("hide"))}),a("#authTrakt").click(function(){0!==a("#trakt_pin").val().length&&a.get(c.srWebRoot+"/home/getTraktToken",{trakt_pin:a("#trakt_pin").val()}).done(function(b){a("#testTrakt-result").html(b),a("#authTrakt").addClass("hide"),a("#trakt_pin").addClass("hide"),a("#TraktGetPin").addClass("hide")})}),a("#testTrakt").click(function(){var d=a.trim(a("#trakt_username").val()),e=a.trim(a("#trakt_blacklist_name").val());return d?/\s/g.test(e)?(a("#testTrakt-result").html(b("Check blacklist name; the value need to be a trakt slug")),void a("#trakt_blacklist_name").addClass("warning")):(a("#trakt_username").removeClass("warning"),a("#trakt_blacklist_name").removeClass("warning"),a(this).prop("disabled",!0),a("#testTrakt-result").html(c.loadingHTML),void a.get(c.srWebRoot+"/home/testTrakt",{username:d,blacklist_name:e}).done(function(b){a("#testTrakt-result").html(b),a("#testTrakt").prop("disabled",!1)})):(a("#testTrakt-result").html(b("Please fill out the necessary fields above.")),void(d?a("#trakt_username").removeClass("warning"):a("#trakt_username").addClass("warning")))}),a("#testEmail").click(function(){var d,e,f,g,h,i,j,k,l;d=a("#testEmail-result"),d.html(c.loadingHTML),e=a("#email_host").val(),e=e.length>0?e:null,f=a("#email_port").val(),f=f.length>0?f:null,g=a("#email_tls").prop("checked"),h=a("#email_from").val(),h=h.length>0?h:"root@localhost",i=a("#email_user").val().trim(),j=a("#email_password").val(),k="",null===e&&(k+=b('<li style="color: red;">You must specify an SMTP hostname!</li>')),null===f?k+=b('<li style="color: red;">You must specify an SMTP port!</li>'):(null===f.match(/^\d+$/)||parseInt(f,10)>65535)&&(k+=b('<li style="color: red;">SMTP port must be between 0 and 65535!</li>')),k.length>0?(k="<ol>"+k+"</ol>",d.html(k)):(l=prompt(b("Enter an email address to send the test to:"),null),null===l||0===l.length||null===l.match(/.*@.*/)?d.html(b('<p style="color: red;">You must provide a recipient email address!</p>')):a.get(c.srWebRoot+"/home/testEmail",{host:e,port:f,smtp_from:h,use_tls:g,user:i,pwd:j,to:l},function(b){a("#testEmail-result").html(b)}))}),a("#testNMA").click(function(){var d=a.trim(a("#nma_api").val()),e=a("#nma_priority").val();if(!d)return a("#testNMA-result").html(b("Please fill out the necessary fields above.")),void a("#nma_api").addClass("warning");a("#nma_api").removeClass("warning"),a(this).prop("disabled",!0),a("#testNMA-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/testNMA",{nma_api:d,nma_priority:e}).done(function(b){a("#testNMA-result").html(b),a("#testNMA").prop("disabled",!1)})}),a("#testPushalot").click(function(){var d=a.trim(a("#pushalot_authorizationtoken").val());if(!d)return a("#testPushalot-result").html(b("Please fill out the necessary fields above.")),void a("#pushalot_authorizationtoken").addClass("warning");a("#pushalot_authorizationtoken").removeClass("warning"),a(this).prop("disabled",!0),a("#testPushalot-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/testPushalot",{authorizationToken:d}).done(function(b){a("#testPushalot-result").html(b),a("#testPushalot").prop("disabled",!1)})}),a("#testPushbullet").click(function(){var d=a.trim(a("#pushbullet_api").val());if(!d)return a("#testPushbullet-result").html(b("Please fill out the necessary fields above.")),void a("#pushbullet_api").addClass("warning");a("#pushbullet_api").removeClass("warning"),a(this).prop("disabled",!0),a("#testPushbullet-result").html(c.loadingHTML),a.get(c.srWebRoot+"/home/testPushbullet",{api:d}).done(function(b){a("#testPushbullet-result").html(b),a("#testPushbullet").prop("disabled",!1)})}),a("#getPushbulletDevices").click(function(){c.config.notifications.get_pushbullet_devices(b("Device list updated. Please choose a device to push to."))}),a("#use_pushbullet").prop("checked")&&c.config.notifications.get_pushbullet_devices(),a("#email_show").on("change",function(){var b=parseInt(a("#email_show").val(),10);a.getJSON(c.srWebRoot+"/home/loadShowNotifyLists",function(c){c._size>0&&a("#email_show_list").val(b>=0?c[b.toString()].list:"")})}),a("#prowl_show").on("change",function(){var b=parseInt(a("#prowl_show").val(),10);a.getJSON(c.srWebRoot+"/home/loadShowNotifyLists",function(c){c._size>0&&a("#prowl_show_list").val(b>=0?c[b.toString()].prowl_notify_list:"")})}),c.config.notifications.load_show_notify_lists(),a("#email_show_save").click(function(){a.post(c.srWebRoot+"/home/saveShowNotifyList",{show:a("#email_show").val(),emails:a("#email_show_list").val()},function(){c.config.notifications.load_show_notify_lists()})}),a("#use_plex").click(function(){a(this).is(":checked")?a(".plexinfo").removeClass("hide"):a(".plexinfo").addClass("hide")})},get_pushbullet_devices:function(d){d&&a("#testPushbullet-result").html(c.loadingHTML);var e=a("#pushbullet_api").val();if(!e)return a("#testPushbullet-result").html(b("You didn't supply a Pushbullet api key")),a("#pushbullet_api").focus(),!1;a.get(c.srWebRoot+"/home/getPushbulletDevices",{api:e},function(b){var c=a.parseJSON(b).devices,e=a("#pushbullet_device").val();a("#pushbullet_device_list").html("");for(var f=0;f<c.length;f++)!0===c[f].active&&(e===c[f].iden?a("#pushbullet_device_list").append('<option value="'+c[f].iden+'" selected>'+c[f].nickname+"</option>"):a("#pushbullet_device_list").append('<option value="'+c[f].iden+'">'+c[f].nickname+"</option>"));""===e?a("#pushbullet_device_list").prepend('<option value="" selected>All devices</option>'):a("#pushbullet_device_list").prepend('<option value="">All devices</option>'),d&&a("#testPushbullet-result").html(d)}),a("#pushbullet_device_list").change(function(){a("#pushbullet_device").val(a("#pushbullet_device_list").val()),a("#testPushbullet-result").html(b("Don't forget to save your new pushbullet settings."))})},load_show_notify_lists:function(){a.getJSON(c.srWebRoot+"/home/loadShowNotifyLists",function(b){var c,d;if(0!==b._size){var e=[];for(d in b)b.hasOwnProperty(d)&&"_"!==d.charAt(0)&&e.push(b[d]);var f=e.sort(function(a,b){return a.name<b.name?-1:a.name>b.name?1:0});c='<option value="-1">-- Select --</option>';for(d in f)f.hasOwnProperty(d)&&f[d].id&&f[d].name&&(c+='<option value="'+f[d].id+'">'+a("<div/>").text(f[d].name).html()+"</option>");a("#email_show").html(c),a("#email_show_list").val(""),a("#prowl_show").html(c),a("#prowl_show_list").val("")}})}},backup_restore:function(){a("#Backup").click(function(){a("#Backup").attr("disabled",!0),a("#Backup-result").html(c.loadingHTML);var b=a("#backupDir").val();a.get(c.srWebRoot+"/config/backuprestore/backup",{backupDir:b}).done(function(b){a("#Backup-result").html(b),a("#Backup").attr("disabled",!1)})}),a("#Restore").click(function(){a("#Restore").attr("disabled",!0),a("#Restore-result").html(c.loadingHTML),a.get(c.srWebRoot+"/config/backuprestore/restore",{backupFile:a("#backupFile").val(),restore_database:a("#restore_database").prop("checked"),restore_config:a("#restore_config").prop("checked"),restore_cache:a("#restore_cache").prop("checked")}).done(function(b){a("#Restore-result").html(b),a("#Restore").attr("disabled",!1)})}),a("#backupDir").fileBrowser({title:b("Select backup folder to save to"),key:"backupPath"}),a("#backupFile").fileBrowser({title:b("Select backup files to restore"),key:"backupFile",includeFiles:1})},providers:{newznabProviders:[],torrentRssProviders:[],newznabProvidersCapabilities:[],init:function(){a(document).on("change",".newznab_key",function(){var b=a(this).attr("id");b=b.substring(0,b.length-"_key".length);var d=a("#"+b+"_url").val(),e=a("#"+b+"_cat").val(),f=a(this).val();c.config.providers.updateNewznabProvider(b,d,f,e)}),a("#newznab_key,#newznab_url").change(function(){var b=a("#editANewznabProvider :selected").val();if("addNewznab"!==b){var d=a("#newznab_url").val(),e=a("#newznab_key").val(),f=a("#newznab_cat option").map(function(b,c){return a(c).text()}).toArray().join(",");c.config.providers.updateNewznabProvider(b,d,e,f)}}),a("#torrentrss_url,#torrentrss_cookies,#torrentrss_titleTAG").change(function(){var b=a("#editATorrentRssProvider :selected").val();if("addTorrentRss"!==b){var d=a("#torrentrss_url").val(),e=a("#torrentrss_cookies").val(),f=a("#torrentrss_titleTAG").val();c.config.providers.updateTorrentRssProvider(b,d,e,f)}}),a(document).on("change","#editAProvider",function(){c.config.providers.showHideProviders()}),a("#editANewznabProvider").change(function(){c.config.providers.populateNewznabSection()}),a("#editATorrentRssProvider").change(function(){c.config.providers.populateTorrentRssSection()}),a(document).on("click",".provider_enabler",function(){c.config.providers.refreshProviderList()}),a("#newznab_cat_update").click(function(){a("#newznab_cat option").each(function(){a(this).remove()});var b=[];a("#newznab_cap option:selected").each(function(){var c=a(this).val();b.push({text:c,value:c})}),c.config.providers.replaceProviderOptions("#newznab_cat",b);var d=a("#editANewznabProvider :selected").val();if("addNewznab"!==d){var e=a("#newznab_url").val(),f=a("#newznab_key").val(),g=a("#newznab_cat option").map(function(b,c){return a(c).text()}).toArray().join(",");a("#newznab_cat option:not([value])").remove(),c.config.providers.updateNewznabProvider(d,e,f,g)}}),a("#newznab_add").click(function(){var b=a.trim(a("#newznab_name").val()),d=a.trim(a("#newznab_url").val()),e=a.trim(a("#newznab_key").val()),f=a.trim(a("#newznab_cat option").map(function(b,c){return a(c).text()}).toArray().join(","));if(b&&d&&e){var g={name:b};a.getJSON(c.srWebRoot+"/config/providers/canAddNewznabProvider",g,function(a){if(void 0!==a.error)return void alert(a.error);c.config.providers.addNewznabProvider(a.success,b,d,e,f,"false"),c.config.providers.refreshEditAProvider()})}}),a(".newznab_delete").click(function(){var b=a("#editANewznabProvider :selected").val();c.config.providers.deleteNewznabProvider(b)}),a("#torrentrss_add").click(function(){var b=a("#torrentrss_name").val(),d=a("#torrentrss_url").val(),e=a("#torrentrss_cookies").val(),f=a("#torrentrss_titleTAG").val(),g={name:b,url:d,cookies:e,titleTAG:f};a.getJSON(c.srWebRoot+"/config/providers/canAddTorrentRssProvider",g,function(a){if(void 0!==a.error)return void alert(a.error);c.config.providers.addTorrentRssProvider(a.success,b,d,e,f,"false"),c.config.providers.refreshEditAProvider()})}),a(".torrentrss_delete").on("click",function(){c.config.providers.deleteTorrentRssProvider(a("#editATorrentRssProvider :selected").val()),c.config.providers.refreshEditAProvider()}),a(document).on("change","[class='providerDiv_tip'] input",function(){a("div .providerDiv [name="+a(this).attr("name")+"]").replaceWith(a(this).clone()),a("div .providerDiv [newznab_name="+a(this).attr("id")+"]").replaceWith(a(this).clone())}),a(document).on("change","[class='providerDiv_tip'] select",function(){a(this).find("option").each(function(){a(this).is(":selected")?a(this).prop("defaultSelected",!0):a(this).prop("defaultSelected",!1)}),a("div .providerDiv [name="+a(this).attr("name")+"]").empty().replaceWith(a(this).clone())}),a(document).on("change",".seed_option",function(){var b=a(this).attr("id").split("_")[0];c.config.providers.makeTorrentOptionString(b)}),a("#provider_order_list").sortable({placeholder:"ui-state-highlight",update:function(){c.config.providers.refreshProviderList()}}),
a("#provider_order_list").disableSelection(),a("#editANewznabProvider").length&&c.config.providers.populateNewznabSection();for(var b=c.getMeta("NEWZNAB_PROVIDERS").split("!!!"),d=0;d<b.length;d++){var e=b[d];e.length>0&&c.config.providers.addNewznabProvider.apply(this,e.split("|"))}for(var f=c.getMeta("TORRENTRSS_PROVIDERS").split("!!!"),g=0;g<f.length;g++){var h=f[g];h.length>0&&c.config.providers.addTorrentRssProvider.apply(this,h.split("|"))}c.config.providers.showHideProviders()},showHideProviders:function(){a(".providerDiv").each(function(){var b=a(this).attr("id");a("#editAProvider :selected").val()+"Div"===b?a(this).show():a(this).hide()})},findProvider:function(a,b){var c=!1;return a.forEach(function(a){a.name===b&&(c=!0),console.log(a.name+" while searching for: "+b)}),c},getNewznabCategories:function(b,d){var e=d[0],f=d[1],g=d[2];if(e&&f&&g){var h={url:f,name:e,key:g};a(".updating_categories").wrapInner("<span>"+c.loadingHTML+" Updating Categories ...</span>"),a.getJSON(c.srWebRoot+"/config/providers/getNewznabCategories",h,function(a){c.config.providers.updateNewznabCaps(a,d)}).always(function(){a(".updating_categories").empty()})}},addNewznabProvider:function(b,d,e,f,g,h,i){(e=a.trim(e))&&(/^https?:\/\//i.test(e)||(e="http://"+e),null===e.match("/$")&&(e+="/"),c.config.providers.newznabProviders[b]=[h,[d,e,f,g]],"true"!==h&&(a("#editANewznabProvider").addOption(b,d),c.config.providers.populateNewznabSection()),0===a("#provider_order_list > #"+b).length&&"false"!==i&&(a("#provider_order_list").append('<li class="ui-state-default" id="'+b+'"> <input type="checkbox" id="enable_'+b+'" class="provider_enabler" CHECKED> <a href="'+c.anonURL+e+'" class="imgLink" target="_new"><img src="'+c.srWebRoot+'/images/providers/nzb.png" alt="'+d+'" width="16" height="16"></a> '+d+"</li>"),a("#provider_order_list").sortable("refresh")),c.config.providers.refreshProviderList())},updateNewznabProvider:function(a,b,d,e){c.config.providers.newznabProviders[a][1][1]=b,c.config.providers.newznabProviders[a][1][2]=d,c.config.providers.newznabProviders[a][1][3]=e,c.config.providers.populateNewznabSection(),c.config.providers.refreshProviderList()},deleteNewznabProvider:function(b){a("#editANewznabProvider").removeOption(b),c.config.providers.populateNewznabSection(),a("li").remove("#"+b),delete c.config.providers.newznabProviders[b],c.config.providers.refreshProviderList()},populateNewznabSection:function(){var b=a("#editANewznabProvider :selected").val(),d="",e="",f="";"addNewznab"===b?(d=["","",""],e="false",a("#newznab_add_div").show(),a("#newznab_update_div").hide(),a("#newznab_cat").attr("disabled","disabled"),a("#newznab_cap").attr("disabled","disabled"),a("#newznab_cat_update").attr("disabled","disabled"),a("#newznabcapdiv").hide(),a("#newznab_cat option").each(function(){a(this).remove()}),a("#newznab_cap option").each(function(){a(this).remove()})):(d=c.config.providers.newznabProviders[b][1],e=c.config.providers.newznabProviders[b][0],a("#newznab_add_div").hide(),a("#newznab_update_div").show(),a("#newznab_cat").removeAttr("disabled"),a("#newznab_cap").removeAttr("disabled"),a("#newznab_cat_update").removeAttr("disabled"),a("#newznabcapdiv").show()),a("#newznab_name").val(d[0]),a("#newznab_url").val(d[1]),a("#newznab_key").val(d[2]),f="string"==typeof d[3]?d[3].split(","):d[3];var g=[];f&&(f.forEach(function(a){""!==a&&g.push({text:a,value:a})}),c.config.providers.replaceProviderOptions("#newznab_cat",g)),"addNewznab"===b?(a("#newznab_name").removeAttr("disabled"),a("#newznab_url").removeAttr("disabled")):(a("#newznab_name").attr("disabled","disabled"),"true"===e?(a("#newznab_url").attr("disabled","disabled"),a("#newznab_delete").attr("disabled","disabled")):(a("#newznab_url").removeAttr("disabled"),a("#newznab_delete").removeAttr("disabled"),d[0]&&d[1]&&d[2]&&!c.config.providers.findProvider(c.config.providers.newznabProvidersCapabilities,d[0])&&c.config.providers.getNewznabCategories(e,d),c.config.providers.updateNewznabCaps(null,d)))},updateNewznabCaps:function(a,b){a&&!c.config.providers.findProvider(c.config.providers.newznabProvidersCapabilities,b[0])&&c.config.providers.newznabProvidersCapabilities.push({name:b[0],categories:a.tv_categories}),b[0]&&c.config.providers.newznabProvidersCapabilities.forEach(function(a){if(a.name&&a.name===b[0]&&a.categories instanceof Array){var d=[];a.categories.forEach(function(a){a.id&&a.name&&d.push({value:a.id,text:a.name+"("+a.id+")"})}),c.config.providers.replaceProviderOptions("#newznab_cap",d)}})},addTorrentRssProvider:function(b,d,e,f,g,h,i){c.config.providers.torrentRssProviders[b]=[d,e,f,g],"true"!==h&&(a("#editATorrentRssProvider").addOption(b,d),c.config.providers.populateTorrentRssSection()),0===a("#provider_order_list > #"+b).length&&"false"!==i&&(a("#provider_order_list").append('<li class="ui-state-default" id="'+b+'"> <input type="checkbox" id="enable_'+b+'" class="provider_enabler" CHECKED> <a href="'+c.anonURL+e+'" class="imgLink" target="_new"><img src="'+c.srWebRoot+'/images/providers/torrent.png" alt="'+d+'" width="16" height="16"></a> '+d+"</li>"),a("#provider_order_list").sortable("refresh")),c.config.providers.refreshProviderList()},updateTorrentRssProvider:function(a,b,d,e){c.config.providers.torrentRssProviders[a][1]=b,c.config.providers.torrentRssProviders[a][2]=d,c.config.providers.torrentRssProviders[a][3]=e,c.config.providers.populateTorrentRssSection(),c.config.providers.refreshProviderList()},deleteTorrentRssProvider:function(b){a("#editATorrentRssProvider").removeOption(b),c.config.providers.populateTorrentRssSection(),a("li").remove("#"+b),delete c.config.providers.torrentRssProviders[b],c.config.providers.refreshProviderList()},populateTorrentRssSection:function(){var b=a("#editATorrentRssProvider :selected").val(),d="";"addTorrentRss"===b?(d=["","","","title"],a("#torrentrss_add_div").show(),a("#torrentrss_update_div").hide()):(d=c.config.providers.torrentRssProviders[b],a("#torrentrss_add_div").hide(),a("#torrentrss_update_div").show()),a("#torrentrss_name").val(d[0]),a("#torrentrss_url").val(d[1]),a("#torrentrss_cookies").val(d[2]),a("#torrentrss_titleTAG").val(d[3]),"addTorrentRss"===b?(a("#torrentrss_name").removeAttr("disabled"),a("#torrentrss_url").removeAttr("disabled"),a("#torrentrss_cookies").removeAttr("disabled"),a("#torrentrss_titleTAG").removeAttr("disabled")):(a("#torrentrss_name").attr("disabled","disabled"),a("#torrentrss_url").removeAttr("disabled"),a("#torrentrss_cookies").removeAttr("disabled"),a("#torrentrss_titleTAG").removeAttr("disabled"),a("#torrentrss_delete").removeAttr("disabled"))},makeTorrentOptionString:function(b){var c=a(".providerDiv_tip #"+b+"_seed_ratio").prop("value"),d=a(".providerDiv_tip #"+b+"_seed_time").prop("value"),e=a(".providerDiv_tip #"+b+"_process_method").prop("value");a(".providerDiv_tip #"+b+"_option_string").val([c,d,e].join("|"))},refreshProviderList:function(){var b=a("#provider_order_list").sortable("toArray"),d=[],e=[];a.each(b,function(b,c){var e=+a("#enable_"+c).prop("checked")?"1":"0";d.push(c+":"+e)});for(var f in c.config.providers.newznabProviders)c.config.providers.newznabProviders.hasOwnProperty(f)&&e.push("newznab|"+c.config.providers.newznabProviders[f][1].join("|"));for(var g in c.config.providers.torrentRssProviders)c.config.providers.torrentRssProviders.hasOwnProperty(g)&&e.push("torrentrss|"+c.config.providers.torrentRssProviders[g].join("|"));a("#provider_strings").val(e.join(" ")),a("#provider_order").val(d.join(" ")),c.config.providers.refreshEditAProvider()},refreshEditAProvider:function(){a("#editAProvider").empty();var d=a("#provider_order_list").sortable("toArray"),e=[];if(a.each(d,function(b,c){a("#enable_"+c).prop("checked")&&e.push(c)}),e.length>0){a("<select>").prop("id","editAProvider").addClass("form-control input-sm").appendTo("#provider-list");for(var f=0;f<e.length;f++){var g=e[f];a("#editAProvider").append(a("<option>").prop("value",g).text(a.trim(a("#"+g).text()).replace(/\s\*$/,"").replace(/\s\*\*$/,"")))}}else document.getElementsByClassName("component-desc")[0].innerHTML=b("No providers available to configure.");c.config.providers.showHideProviders()},replaceProviderOptions:function(b,c){a(b).empty(),a.each(c,function(c,d){a(b).append(a("<option></option>").attr("value",d.value).text(d.text))})}}},manage:{init:function(){},episode_statuses:function(){function b(b,c,d,e,f){var g="";return g+=' <tr class="'+a("#row_class").val()+" show-"+b+'">',g+='  <td class="tableleft" align="center"><input type="checkbox" class="'+b+'-epcheck" name="'+b+"-"+c+"x"+d+'"'+(f?" checked":"")+"></td>",g+="  <td>"+c+"x"+d+"</td>",g+='  <td class="tableright" style="width: 100%">'+e+"</td>",g+=" </tr>"}a(".allCheck").click(function(){var b=a(this).attr("id").split("-")[1];a("."+b+"-epcheck").prop("checked",a(this).prop("checked"))}),a(".get_more_eps").click(function(){var d=a(this).attr("id"),e=a("#allCheck-"+d).prop("checked"),f=a("tr#"+d),g=a(this).attr("data-clicked"),h=a(this).attr("value");g?"collapse"===h.toLowerCase()?(a("table tr").filter(".show-"+d).hide(),a(this).prop("value","Expand")):"expand"===h.toLowerCase()&&(a("table tr").filter(".show-"+d).show(),a(this).prop("value","Collapse")):(a.getJSON(c.srWebRoot+"/manage/showEpisodeStatuses",{indexer_id:d,whichStatus:a("#oldStatus").val()},function(c){a.each(c,function(c,g){a.each(g,function(a,g){f.after(b(d,c,a,g,e))})})}),a(this).attr("data-clicked",1),a(this).prop("value","Collapse"))}),a(".selectAllShows").click(function(){a(".allCheck").each(function(){a(this).prop("checked",!0)}),a('input[class*="-epcheck"]').each(function(){a(this).prop("checked",!0)})}),a(".unselectAllShows").click(function(){a(".allCheck").each(function(){a(this).prop("checked",!1)}),a('input[class*="-epcheck"]').each(function(){a(this).prop("checked",!1)})})},mass_update:function(){a("#massUpdateTable:has(tbody tr)").tablesorter({sortList:[[1,0]],textExtraction:{2:function(b){return a(b).find("span").text().toLowerCase()},3:function(b){return a(b).find("img").attr("alt")},4:function(b){return a(b).find("img").attr("alt")},5:function(b){return a(b).find("img").attr("alt")},6:function(b){return a(b).find("img").attr("alt")},7:function(b){return a(b).find("img").attr("alt")},8:function(b){return a(b).find("img").attr("alt")},9:function(b){return a(b).find("img").attr("alt")}},widgets:["zebra","reflow"],headers:{0:{sorter:!1},1:{sorter:"showNames"},2:{sorter:"quality"},3:{sorter:"sports"},4:{sorter:"scene"},5:{sorter:"anime"},6:{sorter:"flatfold"},7:{sorter:"archive_firstmatch"},8:{sorter:"paused"},9:{sorter:"subtitle"},10:{sorter:"default_ep_status"},11:{sorter:"status"},12:{sorter:!1},13:{sorter:!1},14:{sorter:!1},15:{sorter:!1},16:{sorter:!1},17:{sorter:!1}}}),a("#submitMassEdit").on("click",function(){var b=[];a(".showCheck:checked").each(function(){b.push(a(this).attr("id"))}),0!==b.length&&(window.location.href="massEdit?toEdit="+b.join("|"))}),a("#submitMassUpdate").on("click",function(){var b=[];a(".showCheck:checked").each(function(){b.push(a(this).attr("id"))}),0!==b.length&&(window.location.href="massUpdate?toUpdate="+b.join("|"))}),a("#submitMassRescan").on("click",function(){var b=[];a(".showCheck:checked").each(function(){b.push(a(this).attr("id"))}),0!==b.length&&(window.location.href="massUpdate?toRefresh="+b.join("|"))}),a("#submitMassRename").on("click",function(){var b=[];a(".showCheck:checked").each(function(){b.push(a(this).attr("id"))}),0!==b.length&&(window.location.href="massUpdate?toRename="+b.join("|"))}),a("#submitMassDelete").on("click",function(){var c=[];a(".showCheck:checked").each(function(){c.push(a(this).attr("id"))}),0!==c.length&&a.bootbox.confirm(b("You have selected to delete "+c.length+" show(s).  Are you sure you wish to continue? All files will be removed from your system."),function(a){a&&(window.location.href="massUpdate?toDelete="+c.join("|"))})}),a("#submitMassRemove").on("click",function(){var b=[];a(".showCheck:checked").each(function(){b.push(a(this).attr("id"))}),0!==b.length&&(window.location.href="massUpdate?toRemove="+b.join("|"))}),a(".bulkCheck").on("click",function(){a(".showCheck:visible").each(function(){a(this).disabled||a(this).prop("checked",!this.checked)})}),a("#checkboxControls input").change(function(){var b=a(this).attr("id"),d=a("#checkboxControls > input, #"+b).prop("checked");c.showHideRows(b,d)}),a("#checkboxControls input").each(function(){var b=a(this).prop("checked");a("tr."+a(this).attr("id")).each(function(){b?a(this).show():a(this).hide()})})},mass_edit:{init:function(){a(".new_root_dir").change(function(){var b=c.manage.mass_edit.findDirIndex(a(this).attr("id"));a("#display_new_root_dir_"+b).html("<b>"+a(this).val()+"</b>")}),a(".edit_root_dir").click(function(){var b=c.manage.mass_edit.findDirIndex(a(this).attr("id")),d=a("#new_root_dir_"+b).val();a(this).nFileBrowser(c.manage.mass_edit.editRootDir,{initialDir:d,whichId:b})}),a(".delete_root_dir").click(function(){var d=c.manage.mass_edit.findDirIndex(a(this).attr("id"));a("#new_root_dir_"+d).val(null),a("#display_new_root_dir_"+d).html(b("<b>DELETED</b>"))})},findDirIndex:function(a){var b=a.split("_");return b[b.length-1]},editRootDir:function(b,c){a("#new_root_dir_"+c.whichId).val(b),a("#new_root_dir_"+c.whichId).change()}},backlog_overview:function(){a("#pickShow").change(function(){var b=a(this).val();b&&a("html,body").animate({scrollTop:a("#show-"+b).offset().top-25},"slow")})},failed_downloads:function(){a("#failedTable:has(tbody tr)").tablesorter({widgets:["zebra","reflow"],sortList:[[0,0]],headers:{3:{sorter:!1}}}),a("#limit").change(function(){window.location.href=c.srWebRoot+"/manage/failedDownloads/?limit="+a(this).val()}),a("#submitMassRemove").on("click",function(){var b=[];if(a(".removeCheck").each(function(){a(this).prop("checked")&&b.push(a(this).attr("id").split("-")[1])}),0===b.length)return!1;window.location.href=c.srWebRoot+"/manage/failedDownloads?toRemove="+b.join("|")}),a(".bulkCheck").on("click",function(){var b=this,c=a(b).attr("id");a("."+c+":visible").each(function(){a(this).prop("checked",b.checked)})}),a(".removeCheck").forEach(function(b){var c=null;a(b).click(function(d){if(!c||!d.shiftKey)return void(c=this);var e=this,f=0;a(b+":visible").each(function(){switch(f){case 2:return!1;case 1:a(this).prop("checked",c.checked)}this!==e&&this!==c||f++})})})},subtitles_missed:function(){function b(a,b,c,d,e,f){f=f?" checked":"";var g="";return g+=' <tr class="good show-'+a+'">',g+='  <td align="center"><input type="checkbox" class="'+a+'-epcheck" name="'+a+"-"+b+"x"+c+'"'+f+"></td>",g+='  <td style="width: 1%;">'+b+"x"+c+"</td>",g+="  <td>"+d+"</td>",g+=" </tr>"}a(".allCheck").click(function(){var b=a(this).attr("id").split("-")[1];a("."+b+"-epcheck").prop("checked",a(this).prop("checked"))}),a(".get_more_eps").click(function(){var d=a(this).attr("id"),e=a("#allCheck-"+d).prop("checked"),f=a("tr#"+d),g=a(this).attr("data-clicked"),h=a(this).attr("value");g?"Collapse"===h?(a("table tr").filter(".show-"+d).hide(),a(this).prop("value","Expand")):"Expand"===h&&(a("table tr").filter(".show-"+d).show(),a(this).prop("value","Collapse")):(a.getJSON(c.srWebRoot+"/manage/showSubtitleMissed",{indexer_id:d,whichSubs:a("#selectSubLang").val()},function(c){a.each(c,function(c,g){a.each(g,function(a,g){f.after(b(d,c,a,g.name,g.subtitles,e))})})}),a(this).attr("data-clicked",1),a(this).prop("value","Collapse"))}),a(".selectAllShows").click(function(){a(".allCheck").each(function(){a(this).prop("checked",!0)}),a('input[class*="-epcheck"]').each(function(){a(this).prop("checked",!0)})}),a(".unselectAllShows").click(function(){a(".allCheck").each(function(){a(this).prop("checked",!1)}),a('input[class*="-epcheck"]').each(function(){a(this).prop("checked",!1)})})}},logs:{init:function(){},view:function(){a("#minLevel,#logFilter,#logSearch").on("keyup change",_.debounce(function(){a("#logSearch").val().length>0&&(a('#logFilter option[value="<NONE>"]').prop("selected",!0),a("#minLevel option[value=5]").prop("selected",!0)),a("#minLevel").prop("disabled",!0),a("#logFilter").prop("disabled",!0),document.body.style.cursor="wait";var b=c.srWebRoot+"/logs/viewlog/?minLevel="+a("select[name=minLevel]").val()+"&logFilter="+a("select[name=logFilter]").val()+"&logSearch="+a("#logSearch").val();a.get(b,function(c){history.pushState("data","",b),a("pre").html(a(c).find("pre").html()),a("#minLevel").prop("disabled",!1),a("#logFilter").prop("disabled",!1),document.body.style.cursor="default"})},500))}}};({init:function(){var a=document.body,b=a.getAttribute("data-controller"),c=a.getAttribute("data-action");this.exec("common"),this.exec(b),this.exec(b,c)},exec:function(a,b){b=void 0===b?"init":b,""!==a&&c[a]&&c[a][b]&&{object:c[a][b].init,function:c[a][b]}[typeof c[a][b]]()}}).init()});